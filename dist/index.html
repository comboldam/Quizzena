<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Quizzena</title>
  
  <!-- Mobile App Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#1a0a2e">
  
  <!-- Google Fonts - Orbitron & Rajdhani -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="style.css?v=15">
  
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
  
  <!-- Chart.js for P-XP Dashboard -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  
  <!-- Lottie Player for Loading Animation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  
  <!-- Galaxy Background uses pure WebGL - no external library needed -->
  
  <!-- gl-matrix for 3D math (InfiniteMenu) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/3.4.3/gl-matrix-min.js"></script>
</head>
<body>

  <!-- QUIZ LOADING SCREEN -->
  <div id="quiz-loading-screen" class="quiz-loading-screen hidden">
    <div class="quiz-loading-content">
      <!-- Quizzena Logo -->
      <div class="quiz-loading-logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="120" height="120">
          <defs>
            <linearGradient id="ql-goldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#ffd700"/>
              <stop offset="35%" style="stop-color:#f5a623"/>
              <stop offset="70%" style="stop-color:#e8920b"/>
              <stop offset="100%" style="stop-color:#c77b05"/>
            </linearGradient>
            <linearGradient id="ql-goldGradV" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:#ffd700"/>
              <stop offset="50%" style="stop-color:#f5a623"/>
              <stop offset="100%" style="stop-color:#c77b05"/>
            </linearGradient>
            <linearGradient id="ql-crownGold" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:#ffe066"/>
              <stop offset="40%" style="stop-color:#ffd700"/>
              <stop offset="100%" style="stop-color:#d4940a"/>
            </linearGradient>
            <radialGradient id="ql-redGem" cx="30%" cy="30%" r="70%">
              <stop offset="0%" style="stop-color:#ff6b6b"/>
              <stop offset="50%" style="stop-color:#ef4444"/>
              <stop offset="100%" style="stop-color:#991b1b"/>
            </radialGradient>
            <radialGradient id="ql-orangeGem" cx="30%" cy="30%" r="70%">
              <stop offset="0%" style="stop-color:#fcd34d"/>
              <stop offset="50%" style="stop-color:#f59e0b"/>
              <stop offset="100%" style="stop-color:#b45309"/>
            </radialGradient>
            <filter id="ql-goldGlow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="6" result="blur"/>
              <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
            <filter id="ql-softGlow" x="-30%" y="-30%" width="160%" height="160%">
              <feGaussianBlur stdDeviation="3" result="blur"/>
              <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
            </filter>
          </defs>
          <g filter="url(#ql-goldGlow)">
            <circle cx="256" cy="280" r="100" fill="none" stroke="url(#ql-goldGrad)" stroke-width="32"/>
            <path d="M 185 195 A 100 100 0 0 1 290 185" fill="none" stroke="rgba(255,255,255,0.35)" stroke-width="10" stroke-linecap="round"/>
          </g>
          <g filter="url(#ql-goldGlow)">
            <path d="M 325 350 L 370 378 L 342 382 L 400 440 L 368 434 L 435 510 L 358 445 L 390 450 L 332 395 L 358 392 L 315 365 Z" fill="url(#ql-goldGradV)"/>
            <path d="M 332 356 L 362 378 L 345 382 L 388 425 L 365 420 L 398 465 L 358 435 L 378 440 L 338 395 L 355 392 L 328 370 Z" fill="rgba(255,255,255,0.25)"/>
          </g>
          <g filter="url(#ql-softGlow)" transform="translate(256, 138)">
            <path d="M-58 35 L-58 20 C-58 13 -52 8 -44 8 L44 8 C52 8 58 13 58 20 L58 35 C58 42 52 47 44 47 L-44 47 C-52 47 -58 42 -58 35 Z" fill="url(#ql-crownGold)"/>
            <rect x="-48" y="37" width="96" height="5" rx="2" fill="#a67c00" opacity="0.6"/>
            <rect x="-48" y="14" width="96" height="4" rx="2" fill="rgba(255,255,255,0.35)"/>
            <polygon points="-46,8 -60,-35 -32,8" fill="url(#ql-crownGold)"/>
            <polygon points="-12,8 0,-58 12,8" fill="url(#ql-crownGold)"/>
            <polygon points="32,8 60,-35 46,8" fill="url(#ql-crownGold)"/>
            <polygon points="-30,8 -25,-15 -20,8" fill="url(#ql-crownGold)"/>
            <polygon points="20,8 25,-15 30,8" fill="url(#ql-crownGold)"/>
          </g>
          <g transform="translate(256, 158)">
            <ellipse cx="0" cy="0" rx="14" ry="12" fill="url(#ql-redGem)"/>
            <ellipse cx="-4" cy="-3" rx="5" ry="3" fill="rgba(255,255,255,0.6)"/>
          </g>
          <g transform="translate(212, 162)">
            <ellipse cx="0" cy="0" rx="9" ry="8" fill="url(#ql-orangeGem)"/>
          </g>
          <g transform="translate(300, 162)">
            <ellipse cx="0" cy="0" rx="9" ry="8" fill="url(#ql-orangeGem)"/>
          </g>
        </svg>
      </div>
      
      <!-- Quizzena Text -->
      <h1 class="quiz-loading-title">QUIZZENA</h1>
      
      <!-- Lottie Animation Container -->
      <div id="quiz-loading-lottie" class="quiz-loading-lottie"></div>
    </div>
  </div>

  <!-- WELCOME SCREEN -->
  <div id="welcome-screen" class="welcome-overlay hidden">
    <!-- Animated background orbs -->
    <div class="welcome-bg-orbs">
      <div class="welcome-orb welcome-orb-1"></div>
      <div class="welcome-orb welcome-orb-2"></div>
      <div class="welcome-orb welcome-orb-3"></div>
    </div>
    
    <!-- Floating particles -->
    <div class="welcome-particles">
      <div class="w-particle w-particle-1"></div>
      <div class="w-particle w-particle-2"></div>
      <div class="w-particle w-particle-3"></div>
      <div class="w-particle w-particle-4"></div>
      <div class="w-particle w-particle-5"></div>
      <div class="w-particle w-particle-6"></div>
    </div>
    
    <div class="welcome-content">
      <!-- Logo Section -->
      <div class="welcome-logo-section">
        <div class="welcome-logo-ring">
          <svg viewBox="0 0 200 200" class="welcome-ring-svg">
            <circle class="welcome-ring-bg" cx="100" cy="100" r="90" fill="none" stroke="rgba(147, 51, 234, 0.2)" stroke-width="2"/>
            <circle class="welcome-ring-progress" cx="100" cy="100" r="90" fill="none" stroke="url(#welcomeRingGrad)" stroke-width="3" stroke-linecap="round"/>
          </svg>
          <div class="welcome-logo-inner">
            <svg class="welcome-logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="120" height="120">
              <defs>
                <linearGradient id="welcomeRingGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#ffd700"/>
                  <stop offset="50%" style="stop-color:#a855f7"/>
                  <stop offset="100%" style="stop-color:#6366f1"/>
                </linearGradient>
                <linearGradient id="welcomeGoldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#ffd700"/>
                  <stop offset="50%" style="stop-color:#f59e0b"/>
                  <stop offset="100%" style="stop-color:#d97706"/>
                </linearGradient>
                <linearGradient id="welcomeCrownGold" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" style="stop-color:#ffd700"/>
                  <stop offset="50%" style="stop-color:#f59e0b"/>
                  <stop offset="100%" style="stop-color:#d97706"/>
                </linearGradient>
                <radialGradient id="welcomeRedGem" cx="35%" cy="35%" r="60%">
                  <stop offset="0%" style="stop-color:#ff6b6b"/>
                  <stop offset="40%" style="stop-color:#ef4444"/>
                  <stop offset="100%" style="stop-color:#b91c1c"/>
                </radialGradient>
                <radialGradient id="welcomeBlueGem" cx="35%" cy="35%" r="60%">
                  <stop offset="0%" style="stop-color:#60a5fa"/>
                  <stop offset="40%" style="stop-color:#3b82f6"/>
                  <stop offset="100%" style="stop-color:#1d4ed8"/>
                </radialGradient>
                <filter id="welcomeGoldGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="6" result="blur"/>
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
                <filter id="welcomeCrownGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="4" result="blur"/>
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
                <filter id="welcomeLightningGlow" x="-50%" y="-50%" width="200%" height="200%">
                  <feGaussianBlur stdDeviation="5" result="blur"/>
                  <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
                </filter>
              </defs>
              <!-- Q Ring -->
              <g filter="url(#welcomeGoldGlow)">
                <circle cx="220" cy="270" r="105" fill="none" stroke="url(#welcomeGoldGrad)" stroke-width="34"/>
                <ellipse cx="175" cy="190" rx="32" ry="12" fill="rgba(255,255,255,0.35)" transform="rotate(-45 175 190)"/>
              </g>
              <!-- Lightning Tail -->
              <g filter="url(#welcomeLightningGlow)">
                <path d="M 295 340 L 330 360 L 310 365 L 360 410 L 335 405 L 390 470 L 320 420 L 345 425 L 295 380 L 315 375 L 280 355 Z" fill="url(#welcomeGoldGrad)"/>
                <path d="M 300 345 L 325 362 L 312 365 L 350 400 L 325 395 L 355 430 L 320 400 L 335 405 L 305 375 L 315 372 L 295 358 Z" fill="rgba(255,255,255,0.25)"/>
              </g>
              <!-- Crown -->
              <g filter="url(#welcomeCrownGlow)" transform="translate(220, 125)">
                <path d="M-55 35 L-55 20 C-55 15 -50 10 -45 10 L45 10 C50 10 55 15 55 20 L55 35 C55 40 50 45 45 45 L-45 45 C-50 45 -55 40 -55 35 Z" fill="url(#welcomeCrownGold)"/>
                <rect x="-45" y="35" width="90" height="5" rx="2" fill="#b45309"/>
                <polygon points="-45,10 -55,-30 -35,10" fill="url(#welcomeCrownGold)"/>
                <polygon points="-12,10 0,-50 12,10" fill="url(#welcomeCrownGold)"/>
                <polygon points="35,10 55,-30 45,10" fill="url(#welcomeCrownGold)"/>
                <polygon points="-30,10 -25,-15 -20,10" fill="url(#welcomeCrownGold)"/>
                <polygon points="20,10 25,-15 30,10" fill="url(#welcomeCrownGold)"/>
              </g>
              <!-- Gems -->
              <ellipse cx="220" cy="145" rx="12" ry="10" fill="url(#welcomeRedGem)"/>
              <ellipse cx="175" cy="150" rx="8" ry="7" fill="url(#welcomeBlueGem)"/>
              <ellipse cx="265" cy="150" rx="8" ry="7" fill="url(#welcomeBlueGem)"/>
            </svg>
          </div>
        </div>
      </div>
      
      <!-- Title Section -->
      <div class="welcome-text-section">
        <h1 class="welcome-title">Quizzena</h1>
        <p class="welcome-tagline">The Ultimate Knowledge Arena</p>
      </div>
      
      <!-- Features Preview -->
      <div class="welcome-features">
        <div class="welcome-feature">
          <div class="welcome-feature-icon">üåç</div>
          <span>30+ Topics</span>
        </div>
        <div class="welcome-feature">
          <div class="welcome-feature-icon">üèÜ</div>
          <span>Achievements</span>
        </div>
        <div class="welcome-feature">
          <div class="welcome-feature-icon">üìà</div>
          <span>Track Progress</span>
        </div>
      </div>
      
      <!-- CTA Button -->
      <button id="welcome-start-btn" class="welcome-cta-btn">
        <span class="welcome-cta-text">Get Started</span>
        <div class="welcome-cta-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </div>
      </button>
      
      <!-- Bottom text -->
      <p class="welcome-footer">Challenge your mind. Master the world.</p>
    </div>
  </div>
  
  <!-- LOGIN SCREEN -->
  <div id="login-screen" class="login-overlay hidden">
    <!-- Background orbs -->
    <div class="login-bg-orbs">
      <div class="login-orb login-orb-1"></div>
      <div class="login-orb login-orb-2"></div>
    </div>
    
    <div class="login-card">
      <!-- Card header with logo -->
      <div class="login-header">
        <div class="login-logo-container">
          <div class="login-logo-glow"></div>
          <svg class="login-logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="60" height="60">
            <defs>
              <linearGradient id="loginGoldGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#ffd700"/>
                <stop offset="50%" style="stop-color:#f59e0b"/>
                <stop offset="100%" style="stop-color:#d97706"/>
              </linearGradient>
              <linearGradient id="loginCrownGold" x1="0%" y1="0%" x2="0%" y2="100%">
                <stop offset="0%" style="stop-color:#ffd700"/>
                <stop offset="50%" style="stop-color:#f59e0b"/>
                <stop offset="100%" style="stop-color:#d97706"/>
              </linearGradient>
              <radialGradient id="loginRedGem" cx="35%" cy="35%" r="60%">
                <stop offset="0%" style="stop-color:#ff6b6b"/>
                <stop offset="40%" style="stop-color:#ef4444"/>
                <stop offset="100%" style="stop-color:#b91c1c"/>
              </radialGradient>
              <radialGradient id="loginBlueGem" cx="35%" cy="35%" r="60%">
                <stop offset="0%" style="stop-color:#60a5fa"/>
                <stop offset="40%" style="stop-color:#3b82f6"/>
                <stop offset="100%" style="stop-color:#1d4ed8"/>
              </radialGradient>
              <filter id="loginGoldGlow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="3" result="blur"/>
                <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
              <filter id="loginCrownGlow" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="2" result="blur"/>
                <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
              </filter>
            </defs>
            <g filter="url(#loginGoldGlow)">
              <circle cx="220" cy="270" r="105" fill="none" stroke="url(#loginGoldGrad)" stroke-width="34"/>
            </g>
            <g filter="url(#loginGoldGlow)">
              <path d="M 295 340 L 330 360 L 310 365 L 360 410 L 335 405 L 390 470 L 320 420 L 345 425 L 295 380 L 315 375 L 280 355 Z" fill="url(#loginGoldGrad)"/>
            </g>
            <g filter="url(#loginCrownGlow)" transform="translate(220, 125)">
              <path d="M-55 35 L-55 20 C-55 15 -50 10 -45 10 L45 10 C50 10 55 15 55 20 L55 35 C55 40 50 45 45 45 L-45 45 C-50 45 -55 40 -55 35 Z" fill="url(#loginCrownGold)"/>
              <polygon points="-45,10 -55,-30 -35,10" fill="url(#loginCrownGold)"/>
              <polygon points="-12,10 0,-50 12,10" fill="url(#loginCrownGold)"/>
              <polygon points="35,10 55,-30 45,10" fill="url(#loginCrownGold)"/>
            </g>
            <ellipse cx="220" cy="145" rx="10" ry="8" fill="url(#loginRedGem)"/>
            <ellipse cx="175" cy="150" rx="7" ry="6" fill="url(#loginBlueGem)"/>
            <ellipse cx="265" cy="150" rx="7" ry="6" fill="url(#loginBlueGem)"/>
          </svg>
        </div>
        <h2 class="login-title">Welcome Back</h2>
        <p class="login-subtitle">Sign in to continue your journey</p>
      </div>
      
      <!-- Login Form -->
      <form id="login-form" class="login-form">
        <div class="login-input-wrapper">
          <div class="login-input-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
              <polyline points="22,6 12,13 2,6"/>
            </svg>
          </div>
          <input type="email" id="login-email" class="login-input" placeholder="Email address" required>
        </div>
        
        <div class="login-input-wrapper">
          <div class="login-input-icon">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
          </div>
          <input type="password" id="login-password" class="login-input" placeholder="Password" required>
        </div>
        
        <div class="login-options">
          <label class="login-remember">
            <input type="checkbox" id="remember-me">
            <span class="checkmark"></span>
            <span>Remember me</span>
          </label>
          <a href="#" class="forgot-link">Forgot password?</a>
        </div>
        
        <button type="submit" class="login-submit-btn">
          <span>Sign In</span>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M5 12h14M12 5l7 7-7 7"/>
          </svg>
        </button>
      </form>
      
      <!-- Divider -->
      <div class="login-divider">
        <span>or continue with</span>
      </div>
      
      <!-- Social Login -->
      <div class="social-buttons">
        <button id="google-login-btn" class="social-btn-new google-btn-new">
          <svg width="20" height="20" viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
        </button>
        <button id="facebook-login-btn" class="social-btn-new facebook-btn-new">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="#1877f2">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>
        </button>
        <button id="apple-login-btn" class="social-btn-new apple-btn-new">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
          </svg>
        </button>
      </div>
      
      <!-- Sign Up Link -->
      <div class="login-footer">
        <span>Don't have an account?</span>
        <a href="#" id="goto-signup-btn" class="signup-link-btn">Create Account</a>
      </div>
    </div>
  </div>

  <!-- SETUP SCREEN -->
  <div id="setup-screen" class="setup-overlay hidden">
    <div class="setup-container">
      <h2 class="setup-title">Create Your Profile</h2>

      <div class="setup-section">
        <label class="setup-label">Username <span style="color:#ef4444">*</span></label>
        <input type="text" id="setup-username" class="setup-input" placeholder="Enter username" maxlength="15" required>
      </div>

      <div class="setup-section">
        <label class="setup-label">Profile Picture</label>
        <div class="profile-picture-setup">
          <!-- Preview area -->
          <div class="profile-picture-preview" id="profile-picture-preview">
            <span class="preview-avatar" id="preview-avatar">üë§</span>
            <img class="preview-image hidden" id="preview-image" alt="Profile">
          </div>
          <!-- Upload button -->
          <div class="profile-picture-actions">
            <label class="upload-photo-btn" for="profile-picture-input">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              <span>Upload Photo</span>
            </label>
            <input type="file" id="profile-picture-input" accept="image/*" class="hidden">
            <button type="button" class="remove-photo-btn hidden" id="remove-photo-btn">‚úï Remove</button>
          </div>
        </div>
        <p class="setup-hint">Or choose an emoji avatar:</p>
        <div class="avatar-grid" id="avatar-grid">
          <button class="avatar-btn selected" data-avatar="üë§">üë§</button>
          <button class="avatar-btn" data-avatar="üë®">üë®</button>
          <button class="avatar-btn" data-avatar="üë©">üë©</button>
          <button class="avatar-btn" data-avatar="üßë">üßë</button>
          <button class="avatar-btn" data-avatar="üéÆ">üéÆ</button>
          <button class="avatar-btn" data-avatar="‚öΩ">‚öΩ</button>
          <button class="avatar-btn" data-avatar="ü¶ä">ü¶ä</button>
          <button class="avatar-btn" data-avatar="üêº">üêº</button>
          <button class="avatar-btn" data-avatar="ü§ñ">ü§ñ</button>
          <button class="avatar-btn" data-avatar="üëΩ">üëΩ</button>
          <button class="avatar-btn" data-avatar="ü¶Å">ü¶Å</button>
          <button class="avatar-btn" data-avatar="üê∏">üê∏</button>
        </div>
      </div>

      <div class="setup-section">
        <label class="setup-label">Country <span style="color:#ef4444">*</span></label>
        <select id="setup-country" class="setup-select" required>
          <option value="">-- Select Country --</option>
          <option value="AF">Afghanistan</option>
          <option value="AL">Albania</option>
          <option value="DZ">Algeria</option>
          <option value="AD">Andorra</option>
          <option value="AO">Angola</option>
          <option value="AG">Antigua and Barbuda</option>
          <option value="AR">Argentina</option>
          <option value="AM">Armenia</option>
          <option value="AU">Australia</option>
          <option value="AT">Austria</option>
          <option value="AZ">Azerbaijan</option>
          <option value="BS">Bahamas</option>
          <option value="BH">Bahrain</option>
          <option value="BD">Bangladesh</option>
          <option value="BB">Barbados</option>
          <option value="BY">Belarus</option>
          <option value="BE">Belgium</option>
          <option value="BZ">Belize</option>
          <option value="BJ">Benin</option>
          <option value="BT">Bhutan</option>
          <option value="BO">Bolivia</option>
          <option value="BA">Bosnia and Herzegovina</option>
          <option value="BW">Botswana</option>
          <option value="BR">Brazil</option>
          <option value="BN">Brunei</option>
          <option value="BG">Bulgaria</option>
          <option value="BF">Burkina Faso</option>
          <option value="BI">Burundi</option>
          <option value="KH">Cambodia</option>
          <option value="CM">Cameroon</option>
          <option value="CA">Canada</option>
          <option value="CV">Cape Verde</option>
          <option value="CF">Central African Republic</option>
          <option value="TD">Chad</option>
          <option value="CL">Chile</option>
          <option value="CN">China</option>
          <option value="CO">Colombia</option>
          <option value="KM">Comoros</option>
          <option value="CG">Congo</option>
          <option value="CR">Costa Rica</option>
          <option value="HR">Croatia</option>
          <option value="CU">Cuba</option>
          <option value="CY">Cyprus</option>
          <option value="CZ">Czech Republic</option>
          <option value="DK">Denmark</option>
          <option value="DJ">Djibouti</option>
          <option value="DM">Dominica</option>
          <option value="DO">Dominican Republic</option>
          <option value="EC">Ecuador</option>
          <option value="EG">Egypt</option>
          <option value="SV">El Salvador</option>
          <option value="GQ">Equatorial Guinea</option>
          <option value="ER">Eritrea</option>
          <option value="EE">Estonia</option>
          <option value="ET">Ethiopia</option>
          <option value="FJ">Fiji</option>
          <option value="FI">Finland</option>
          <option value="FR">France</option>
          <option value="GA">Gabon</option>
          <option value="GM">Gambia</option>
          <option value="GE">Georgia</option>
          <option value="DE">Germany</option>
          <option value="GH">Ghana</option>
          <option value="GR">Greece</option>
          <option value="GD">Grenada</option>
          <option value="GT">Guatemala</option>
          <option value="GN">Guinea</option>
          <option value="GW">Guinea-Bissau</option>
          <option value="GY">Guyana</option>
          <option value="HT">Haiti</option>
          <option value="HN">Honduras</option>
          <option value="HU">Hungary</option>
          <option value="IS">Iceland</option>
          <option value="IN">India</option>
          <option value="ID">Indonesia</option>
          <option value="IR">Iran</option>
          <option value="IQ">Iraq</option>
          <option value="IE">Ireland</option>
          <option value="IL">Israel</option>
          <option value="IT">Italy</option>
          <option value="CI">Ivory Coast</option>
          <option value="JM">Jamaica</option>
          <option value="JP">Japan</option>
          <option value="JO">Jordan</option>
          <option value="KZ">Kazakhstan</option>
          <option value="KE">Kenya</option>
          <option value="KI">Kiribati</option>
          <option value="KW">Kuwait</option>
          <option value="KG">Kyrgyzstan</option>
          <option value="LA">Laos</option>
          <option value="LV">Latvia</option>
          <option value="LB">Lebanon</option>
          <option value="LS">Lesotho</option>
          <option value="LR">Liberia</option>
          <option value="LY">Libya</option>
          <option value="LI">Liechtenstein</option>
          <option value="LT">Lithuania</option>
          <option value="LU">Luxembourg</option>
          <option value="MK">North Macedonia</option>
          <option value="MG">Madagascar</option>
          <option value="MW">Malawi</option>
          <option value="MY">Malaysia</option>
          <option value="MV">Maldives</option>
          <option value="ML">Mali</option>
          <option value="MT">Malta</option>
          <option value="MH">Marshall Islands</option>
          <option value="MR">Mauritania</option>
          <option value="MU">Mauritius</option>
          <option value="MX">Mexico</option>
          <option value="FM">Micronesia</option>
          <option value="MD">Moldova</option>
          <option value="MC">Monaco</option>
          <option value="MN">Mongolia</option>
          <option value="ME">Montenegro</option>
          <option value="MA">Morocco</option>
          <option value="MZ">Mozambique</option>
          <option value="MM">Myanmar</option>
          <option value="NA">Namibia</option>
          <option value="NR">Nauru</option>
          <option value="NP">Nepal</option>
          <option value="NL">Netherlands</option>
          <option value="NZ">New Zealand</option>
          <option value="NI">Nicaragua</option>
          <option value="NE">Niger</option>
          <option value="NG">Nigeria</option>
          <option value="KP">North Korea</option>
          <option value="NO">Norway</option>
          <option value="OM">Oman</option>
          <option value="PK">Pakistan</option>
          <option value="PW">Palau</option>
          <option value="PS">Palestine</option>
          <option value="PA">Panama</option>
          <option value="PG">Papua New Guinea</option>
          <option value="PY">Paraguay</option>
          <option value="PE">Peru</option>
          <option value="PH">Philippines</option>
          <option value="PL">Poland</option>
          <option value="PT">Portugal</option>
          <option value="QA">Qatar</option>
          <option value="RO">Romania</option>
          <option value="RU">Russia</option>
          <option value="RW">Rwanda</option>
          <option value="KN">Saint Kitts and Nevis</option>
          <option value="LC">Saint Lucia</option>
          <option value="VC">Saint Vincent</option>
          <option value="WS">Samoa</option>
          <option value="SM">San Marino</option>
          <option value="ST">Sao Tome and Principe</option>
          <option value="SA">Saudi Arabia</option>
          <option value="SN">Senegal</option>
          <option value="RS">Serbia</option>
          <option value="SC">Seychelles</option>
          <option value="SL">Sierra Leone</option>
          <option value="SG">Singapore</option>
          <option value="SK">Slovakia</option>
          <option value="SI">Slovenia</option>
          <option value="SB">Solomon Islands</option>
          <option value="SO">Somalia</option>
          <option value="ZA">South Africa</option>
          <option value="KR">South Korea</option>
          <option value="SS">South Sudan</option>
          <option value="ES">Spain</option>
          <option value="LK">Sri Lanka</option>
          <option value="SD">Sudan</option>
          <option value="SR">Suriname</option>
          <option value="SZ">Eswatini</option>
          <option value="SE">Sweden</option>
          <option value="CH">Switzerland</option>
          <option value="SY">Syria</option>
          <option value="TW">Taiwan</option>
          <option value="TJ">Tajikistan</option>
          <option value="TZ">Tanzania</option>
          <option value="TH">Thailand</option>
          <option value="TL">Timor-Leste</option>
          <option value="TG">Togo</option>
          <option value="TO">Tonga</option>
          <option value="TT">Trinidad and Tobago</option>
          <option value="TN">Tunisia</option>
          <option value="TR">Turkey</option>
          <option value="TM">Turkmenistan</option>
          <option value="TV">Tuvalu</option>
          <option value="UG">Uganda</option>
          <option value="UA">Ukraine</option>
          <option value="AE">United Arab Emirates</option>
          <option value="GB">United Kingdom</option>
          <option value="US">United States</option>
          <option value="UY">Uruguay</option>
          <option value="UZ">Uzbekistan</option>
          <option value="VU">Vanuatu</option>
          <option value="VA">Vatican City</option>
          <option value="VE">Venezuela</option>
          <option value="VN">Vietnam</option>
          <option value="YE">Yemen</option>
          <option value="ZM">Zambia</option>
          <option value="ZW">Zimbabwe</option>
        </select>
      </div>

      <button id="setup-save-btn" class="setup-btn" data-i18n="setup_save_start">Save & Start</button>
    </div>
  </div>

  <!-- ================================ -->
  <!-- üè† HOME SCREEN (TOPIC SELECTION) -->
  <!-- ================================ -->
  <div id="home-screen">

    <!-- SVG Definitions for Level & Quanta -->
    <svg width="0" height="0" style="position:absolute">
      <defs>
        <linearGradient id="levelGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#fbbf24"/>
          <stop offset="50%" style="stop-color:#a78bfa"/>
          <stop offset="100%" style="stop-color:#6366f1"/>
        </linearGradient>
        <linearGradient id="quantaGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#c4b5fd"/>
          <stop offset="30%" style="stop-color:#a78bfa"/>
          <stop offset="60%" style="stop-color:#8b5cf6"/>
          <stop offset="100%" style="stop-color:#6366f1"/>
        </linearGradient>
        <radialGradient id="quantaInnerGlow" cx="50%" cy="50%" r="50%">
          <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.8"/>
          <stop offset="100%" style="stop-color:#a78bfa;stop-opacity:0"/>
        </radialGradient>
        <filter id="quantaGlow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur in="SourceGraphic" stdDeviation="1" result="blur"/>
          <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
        </filter>
      </defs>
    </svg>

    <!-- Top Bar - Status Strip -->
    <div class="top-bar">
      <!-- Left: Brand -->
      <div class="top-bar-left">
        <div class="app-title">Quizzena</div>
      </div>

      <!-- Center: Level Badge -->
      <div class="top-bar-center">
        <div class="level-badge" id="level-badge" onclick="playClickSound(); openJourneyModal();">
          <div class="level-badge-ring">
            <svg viewBox="0 0 48 48">
              <circle class="level-ring-bg" cx="24" cy="24" r="22"/>
              <circle class="level-ring-progress" id="level-ring" cx="24" cy="24" r="22"/>
            </svg>
          </div>
          <div class="level-badge-inner">
            <span class="level-badge-text">LV</span>
            <span class="level-badge-number" id="global-level-number">1</span>
          </div>
        </div>
      </div>

      <!-- Right: Quanta + Profile -->
      <div class="top-bar-right">
        <div class="quanta-display" onclick="playClickSound(); openQuantaModal();">
          <div class="quanta-icon">
            <svg viewBox="0 0 24 24" width="20" height="20" filter="url(#quantaGlow)">
              <path d="M12 0 L14.5 9.5 L24 12 L14.5 14.5 L12 24 L9.5 14.5 L0 12 L9.5 9.5 Z" fill="url(#quantaGradient)"/>
              <path d="M12 6 L13.5 10.5 L18 12 L13.5 13.5 L12 18 L10.5 13.5 L6 12 L10.5 10.5 Z" fill="url(#quantaInnerGlow)"/>
            </svg>
          </div>
          <span class="quanta-amount" id="quanta-amount">0</span>
        </div>
        <div class="user-profile" onclick="playClickSound(); showProfile();">
          <span class="user-profile-avatar" id="nav-avatar">üë§</span>
          <img class="user-profile-image hidden" id="nav-profile-image" alt="Profile">
        </div>
      </div>
    </div>

    <!-- Quanta Modal -->
    <div class="quanta-modal hidden" id="quanta-modal">
      <div class="quanta-modal-backdrop" onclick="closeQuantaModal()"></div>
      <div class="quanta-modal-content">
        <button class="quanta-modal-close" onclick="closeQuantaModal()">‚úï</button>
        <div class="quanta-modal-icon">
          <svg viewBox="0 0 24 24" width="64" height="64">
            <path d="M12 0 L14.5 9.5 L24 12 L14.5 14.5 L12 24 L9.5 14.5 L0 12 L9.5 9.5 Z" fill="url(#quantaGradient)"/>
            <path d="M12 6 L13.5 10.5 L18 12 L13.5 13.5 L12 18 L10.5 13.5 L6 12 L10.5 10.5 Z" fill="url(#quantaInnerGlow)"/>
          </svg>
        </div>
        <h2 class="quanta-modal-title" data-i18n="quanta_title">‚ú¶ Quanta</h2>
        <p class="quanta-modal-text" data-i18n="quanta_description">Quanta is the knowledge currency of Quizzena.<br><br>You earn Quanta by playing quizzes, improving accuracy, and unlocking achievements.<br><br>Quanta will determine access to Founders privileges and future competitive features.</p>
        <button class="quanta-modal-btn" onclick="closeQuantaModal()" data-i18n="common_ok">OK</button>
      </div>
    </div>

    <!-- P-XP Dashboard (Full Page) -->
    <div class="pxp-dashboard hidden" id="pxp-dashboard">
      <!-- Top Bar -->
      <div class="pxp-top-bar">
        <button class="pxp-back-btn" onclick="playClickSound(); closePxpDashboard();">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
        </button>
        <h1 class="pxp-title" data-i18n="pxp_dashboard">P-XP Dashboard</h1>
        <div class="pxp-spacer"></div>
      </div>

      <!-- Level Status Section -->
      <div class="pxp-status-section">
        <div class="pxp-level-circle">
          <svg viewBox="0 0 120 120" class="pxp-ring-svg">
            <circle class="pxp-ring-bg" cx="60" cy="60" r="52"/>
            <circle class="pxp-ring-progress" id="pxp-ring-progress" cx="60" cy="60" r="52"/>
          </svg>
          <div class="pxp-level-inner">
            <span class="pxp-level-label">LEVEL</span>
            <span class="pxp-level-number" id="pxp-level-number">1</span>
          </div>
        </div>
        <div class="pxp-progress-info">
          <div class="pxp-progress-text">
            <span id="pxp-current">0</span> / <span id="pxp-required">40</span> P-XP
          </div>
          <div class="pxp-progress-bar">
            <div class="pxp-progress-fill" id="pxp-progress-fill"></div>
          </div>
          <div class="pxp-total-text">Total: <span id="pxp-total">0</span> P-XP earned</div>
        </div>
      </div>

      <!-- Time Period Tabs -->
      <div class="pxp-tabs">
        <button class="pxp-tab active" data-period="day" onclick="switchPxpPeriod('day')" data-i18n="pxp_1_day">1 Day</button>
        <button class="pxp-tab" data-period="week" onclick="switchPxpPeriod('week')" data-i18n="pxp_1_week">1 Week</button>
        <button class="pxp-tab" data-period="month" onclick="switchPxpPeriod('month')" data-i18n="pxp_1_month">1 Month</button>
        <button class="pxp-tab" data-period="year" onclick="switchPxpPeriod('year')" data-i18n="pxp_1_year">1 Year</button>
      </div>

      <!-- Chart Container -->
      <div class="pxp-chart-container">
        <canvas id="pxp-chart"></canvas>
      </div>

      <!-- Legend -->
      <div class="pxp-legend">
        <div class="pxp-legend-item">
          <span class="pxp-legend-dot games"></span>
          <span data-i18n="pxp_games_each">Games (+10 each)</span>
        </div>
        <div class="pxp-legend-item">
          <span class="pxp-legend-dot answers"></span>
          <span data-i18n="pxp_answers_each">Answers (+1 each)</span>
        </div>
        <div class="pxp-legend-item">
          <span class="pxp-legend-dot achievements"></span>
          <span>Achievements</span>
        </div>
      </div>

      <!-- Breakdown Section -->
      <div class="pxp-breakdown">
        <h3 class="pxp-breakdown-title" id="pxp-breakdown-title">Today's Breakdown</h3>
        <div class="pxp-breakdown-card">
          <div class="pxp-breakdown-row">
            <span class="pxp-breakdown-label" data-i18n="pxp_games_completed">Games Completed</span>
            <span class="pxp-breakdown-value"><span id="pxp-games-count">0</span> ‚Üí <span id="pxp-games-pxp">+0</span> P-XP</span>
          </div>
          <div class="pxp-breakdown-row">
            <span class="pxp-breakdown-label">Correct Answers</span>
            <span class="pxp-breakdown-value"><span id="pxp-answers-count">0</span> ‚Üí <span id="pxp-answers-pxp">+0</span> P-XP</span>
          </div>
          <div class="pxp-breakdown-row">
            <span class="pxp-breakdown-label" data-i18n="pxp_achievements_claimed">Achievements Claimed</span>
            <span class="pxp-breakdown-value"><span id="pxp-achievements-count">0</span> ‚Üí <span id="pxp-achievements-pxp">+0</span> P-XP</span>
          </div>
          <div class="pxp-breakdown-divider"></div>
          <div class="pxp-breakdown-row total">
            <span class="pxp-breakdown-label" data-i18n="pxp_total_earned_label">Total Earned</span>
            <span class="pxp-breakdown-value" id="pxp-period-total">+0 P-XP</span>
          </div>
        </div>
      </div>

      <!-- How P-XP Works -->
      <div class="pxp-info">
        <h3 class="pxp-info-title" data-i18n="pxp_how_it_works">‚ÑπÔ∏è How P-XP Works</h3>
        <ul class="pxp-info-list">
          <li>Complete a game: <strong>+10 P-XP</strong></li>
          <li>Each correct answer: <strong>+1 P-XP</strong></li>
          <li>2-Player mode: <strong>No P-XP</strong></li>
          <li>Level formula: <strong>40 √ó Level¬≤</strong></li>
        </ul>
      </div>
    </div>

    <!-- Stats Chart Dashboard (Full Page) -->
    <div class="stats-chart-dashboard hidden" id="stats-chart-dashboard">
      <!-- Top Bar -->
      <div class="stats-chart-top-bar">
        <button class="stats-chart-back-btn" onclick="playClickSound(); closeStatsChart();">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
        </button>
        <h1 class="stats-chart-title">Overall Stats</h1>
        <div class="stats-chart-spacer"></div>
      </div>

      <!-- Page Navigation Tabs -->
      <div class="stats-page-tabs">
        <button class="stats-page-tab active" id="stats-page-1-tab" onclick="switchStatsPage(1)">
          <span class="stats-page-tab-icon">üìä</span>
          <span class="stats-page-tab-text" data-i18n="stats_overall">Overall</span>
        </button>
        <button class="stats-page-tab" id="stats-page-2-tab" onclick="switchStatsPage(2)">
          <span class="stats-page-tab-icon">üéØ</span>
          <span class="stats-page-tab-text" data-i18n="stats_by_topic">By Topic</span>
        </button>
      </div>

      <!-- Page 1: Overall Stats Chart -->
      <div class="stats-page" id="stats-page-1">
        <!-- Stat Type Selector -->
        <div class="stats-type-selector">
          <button class="stats-type-btn active" data-stat="games" onclick="switchStatType('games')">
            <span class="stats-type-icon">üéÆ</span>
            <span class="stats-type-label" data-i18n="stats_games_label">Games</span>
          </button>
          <button class="stats-type-btn" data-stat="questions" onclick="switchStatType('questions')">
            <span class="stats-type-icon">‚ùì</span>
            <span class="stats-type-label" data-i18n="stats_questions_label">Questions</span>
          </button>
          <button class="stats-type-btn" data-stat="correct" onclick="switchStatType('correct')">
            <span class="stats-type-icon">‚úÖ</span>
            <span class="stats-type-label">Correct</span>
          </button>
          <button class="stats-type-btn" data-stat="wrong" onclick="switchStatType('wrong')">
            <span class="stats-type-icon">‚ùå</span>
            <span class="stats-type-label" data-i18n="stats_wrong_label">Wrong</span>
          </button>
          <button class="stats-type-btn" data-stat="time" onclick="switchStatType('time')">
            <span class="stats-type-icon">‚è±Ô∏è</span>
            <span class="stats-type-label">Time</span>
          </button>
          <button class="stats-type-btn" data-stat="streak" onclick="switchStatType('streak')">
            <span class="stats-type-icon">üî•</span>
            <span class="stats-type-label" data-i18n="stats_streak_label">Streak</span>
          </button>
        </div>

        <!-- Time Period Tabs -->
        <div class="stats-period-tabs">
          <button class="stats-period-tab active" data-period="day" onclick="switchStatsPeriod('day')" data-i18n="pxp_1_day">1 Day</button>
          <button class="stats-period-tab" data-period="week" onclick="switchStatsPeriod('week')" data-i18n="pxp_1_week">1 Week</button>
          <button class="stats-period-tab" data-period="month" onclick="switchStatsPeriod('month')" data-i18n="pxp_1_month">1 Month</button>
          <button class="stats-period-tab" data-period="year" onclick="switchStatsPeriod('year')" data-i18n="pxp_1_year">1 Year</button>
          <button class="stats-period-tab" data-period="all" onclick="switchStatsPeriod('all')" data-i18n="pxp_all_time">All Time</button>
        </div>

        <!-- Chart Container -->
        <div class="stats-chart-container">
          <canvas id="stats-chart"></canvas>
          <div class="stats-chart-empty hidden" id="stats-chart-empty">
            <span class="stats-empty-icon">üì≠</span>
            <span class="stats-empty-text" data-i18n="stats_no_data">No data available for this time range</span>
          </div>
        </div>

        <!-- Summary Cards -->
        <div class="stats-summary-cards">
          <div class="stats-summary-card peak">
            <span class="stats-summary-label">Peak</span>
            <span class="stats-summary-value" id="stats-peak-value">0</span>
          </div>
          <div class="stats-summary-card average">
            <span class="stats-summary-label" data-i18n="stats_average">Average</span>
            <span class="stats-summary-value" id="stats-avg-value">0</span>
          </div>
          <div class="stats-summary-card total">
            <span class="stats-summary-label" data-i18n="stats_total">Total</span>
            <span class="stats-summary-value" id="stats-total-value">0</span>
          </div>
        </div>
      </div>

      <!-- Page 2: Topic Stats Chart (Same layout as Page 1 + Topic Dropdown) -->
      <div class="stats-page hidden" id="stats-page-2">
        <!-- Topic Selector Dropdown -->
        <div class="topic-selector-wrapper">
          <div class="topic-selector" id="topic-selector" onclick="toggleTopicDropdown()">
            <span class="topic-selector-icon" id="selected-topic-icon">üè≥Ô∏è</span>
            <span class="topic-selector-name" id="selected-topic-name">Flags</span>
            <span class="topic-selector-arrow">‚ñº</span>
          </div>
          
          <!-- Dropdown -->
          <div class="topic-dropdown hidden" id="topic-dropdown">
            <div class="topic-dropdown-search">
              <input type="text" id="topic-dropdown-search" placeholder="Search topics..." oninput="filterTopicDropdown(this.value)"/>
            </div>
            <div class="topic-dropdown-list" id="topic-dropdown-list">
              <!-- Populated by JS -->
            </div>
          </div>
        </div>
        
        <!-- Stat Type Selector (Same as Page 1) -->
        <div class="stats-type-selector">
          <button class="stats-type-btn active" data-stat="games" onclick="switchTopicStatType('games')">
            <span class="stats-type-icon">üéÆ</span>
            <span class="stats-type-label" data-i18n="stats_games_label">Games</span>
          </button>
          <button class="stats-type-btn" data-stat="accuracy" onclick="switchTopicStatType('accuracy')">
            <span class="stats-type-icon">üéØ</span>
            <span class="stats-type-label">Accuracy</span>
          </button>
          <button class="stats-type-btn" data-stat="streak" onclick="switchTopicStatType('streak')">
            <span class="stats-type-icon">üî•</span>
            <span class="stats-type-label" data-i18n="stats_streak_label">Streak</span>
          </button>
          <button class="stats-type-btn" data-stat="time" onclick="switchTopicStatType('time')">
            <span class="stats-type-icon">‚è±Ô∏è</span>
            <span class="stats-type-label">Time</span>
          </button>
          <button class="stats-type-btn" data-stat="avgtime" onclick="switchTopicStatType('avgtime')">
            <span class="stats-type-icon">‚ö°</span>
            <span class="stats-type-label">A.Time</span>
          </button>
        </div>

        <!-- Time Period Tabs (Same as Page 1) -->
        <div class="stats-period-tabs">
          <button class="stats-period-tab active" data-period="day" onclick="switchTopicPeriod('day')" data-i18n="pxp_1_day">1 Day</button>
          <button class="stats-period-tab" data-period="week" onclick="switchTopicPeriod('week')" data-i18n="pxp_1_week">1 Week</button>
          <button class="stats-period-tab" data-period="month" onclick="switchTopicPeriod('month')" data-i18n="pxp_1_month">1 Month</button>
          <button class="stats-period-tab" data-period="year" onclick="switchTopicPeriod('year')" data-i18n="pxp_1_year">1 Year</button>
        </div>

        <!-- Chart Container (Same as Page 1) -->
        <div class="stats-chart-container">
          <canvas id="topic-stats-chart"></canvas>
          <div class="stats-chart-empty hidden" id="topic-chart-empty">
            <span class="stats-empty-icon">üìä</span>
            <span class="stats-empty-text">Play some games to see your stats here!</span>
          </div>
        </div>

        <!-- Summary Cards (Same as Page 1) -->
        <div class="stats-summary-cards">
          <div class="stats-summary-card peak">
            <span class="stats-summary-label">Peak</span>
            <span class="stats-summary-value" id="topic-peak-value">0</span>
          </div>
          <div class="stats-summary-card average">
            <span class="stats-summary-label" data-i18n="stats_average">Average</span>
            <span class="stats-summary-value" id="topic-avg-value">0</span>
          </div>
          <div class="stats-summary-card total">
            <span class="stats-summary-label" data-i18n="stats_total">Total</span>
            <span class="stats-summary-value" id="topic-total-value">0</span>
          </div>
        </div>
      </div>
    </div>

    <!-- HOME SCREEN VIEW -->
    <div class="home-view" id="home-view">

      <!-- Top Row: Trail Ring (right aligned) -->
      <div class="home-top-row">
        <div class="home-greeting"></div>
        <div class="trail-ring-mini" onclick="playClickSound(); openTrailRingModal();">
          <div class="trail-ring-mini-visual">
            <svg class="trail-ring-mini-svg" viewBox="0 0 100 100">
              <defs>
                <linearGradient id="trailGradientMini1" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#7c3aed"/>
                  <stop offset="100%" style="stop-color:#6366f1"/>
                </linearGradient>
              </defs>
              <circle cx="50" cy="50" r="42" fill="none" stroke="url(#trailGradientMini1)" stroke-width="6" stroke-dasharray="20 10"/>
            </svg>
            <span class="trail-ring-mini-icon">üîÆ</span>
          </div>
        </div>
      </div>

      <!-- Trail Ring Modal (keep existing) -->
      <div class="trail-ring-modal hidden" id="trail-ring-modal">
        <div class="trail-ring-modal-backdrop" onclick="closeTrailRingModal()"></div>
        <div class="trail-ring-modal-content">
          <div class="trail-ring-modal-icon">üîÆ</div>
          <h2 class="trail-ring-modal-title">Trail Rings</h2>
          <p class="trail-ring-modal-text">
            Trail Rings will unlock in a future update.<br><br>
            Grow your knowledge to ignite your ring.
          </p>
          <button class="trail-ring-modal-btn" onclick="closeTrailRingModal()">OK</button>
        </div>
      </div>

      <!-- Quiz of the Day - Compact with animations -->
      <div class="qotd-section-compact">
        <div class="qotd-title-compact">Quiz of the Day</div>
        <div class="qotd-card-compact" onclick="playClickSound(); startQuizOfTheDay();">
          <!-- Glow aura behind brain -->
          <div class="qotd-glow"></div>
          
          <!-- Floating particles -->
          <div class="qotd-particles">
            <span class="qotd-particle">‚ú®</span>
            <span class="qotd-particle">üí°</span>
            <span class="qotd-particle">‚≠ê</span>
            <span class="qotd-particle">üß†</span>
            <span class="qotd-particle">üíú</span>
            <span class="qotd-particle">‚ú®</span>
            <span class="qotd-particle">üéØ</span>
            <span class="qotd-particle">‚ö°</span>
          </div>
          
          <!-- Brain image -->
          <img src="icons/qotd/brain.png" alt="Quiz of the Day" class="qotd-image-compact">
        </div>
      </div>

      <!-- Continue Playing Section -->
      <div class="continue-section">
        <h3 class="section-title-compact" data-i18n="home_continue_playing">Continue Playing</h3>
        <div class="continue-row" id="continue-row">
          <!-- Populated dynamically by JS with cloned actual topic cards -->
        </div>
      </div>

      <!-- Quick Play Section -->
      <div class="quick-play-section">
        <h3 class="section-title-compact" data-i18n="home_quick_play">Quick Play</h3>
        <div class="quick-play-row">
          <button class="quick-play-card quick-play-random" onclick="playClickSound(); startRandomQuiz();">
            <img src="icons/random_icon/random-dice.png" class="quick-play-icon-img" alt="Random">
            <span class="quick-play-label" data-i18n="home_random">Random</span>
          </button>
          <div class="quick-play-card quick-play-slot" id="slot-1" data-slot="1" onclick="playClickSound(); handleSlotClick(1);">
            <span class="slot-clear-btn" onclick="event.stopPropagation(); playClickSound(); clearSlot(1);" role="button" aria-label="Clear slot">‚úï</span>
            <img src="" class="slot-topic-img" alt="">
            <span class="slot-empty-icon">+</span>
            <span class="quick-play-label slot-label" data-i18n="home_slot">Slot 1</span>
          </div>
          <div class="quick-play-card quick-play-slot" id="slot-2" data-slot="2" onclick="playClickSound(); handleSlotClick(2);">
            <span class="slot-clear-btn" onclick="event.stopPropagation(); playClickSound(); clearSlot(2);" role="button" aria-label="Clear slot">‚úï</span>
            <img src="" class="slot-topic-img" alt="">
            <span class="slot-empty-icon">+</span>
            <span class="quick-play-label slot-label" data-i18n="home_slot">Slot 2</span>
          </div>
        </div>
      </div>

      <!-- Explore Categories - Compact Grid -->
      <div class="home-categories-section-compact">
        <h3 class="section-title-compact" data-i18n="home_explore">Explore</h3>
        <div class="home-categories-grid-compact">
          <button class="home-category-card-compact" data-category="geography">
            <img src="icons/categories/geography.png" class="cat-icon-compact cat-icon-img" alt="Geography">
            <span class="cat-name-compact">Geography</span>
          </button>
          <button class="home-category-card-compact" data-category="football">
            <img src="icons/categories/football.png" class="cat-icon-compact cat-icon-img" alt="Football">
            <span class="cat-name-compact">Football</span>
          </button>
          <button class="home-category-card-compact" data-category="movies">
            <img src="icons/categories/movies.png" class="cat-icon-compact cat-icon-img" alt="Movies">
            <span class="cat-name-compact">Movies</span>
          </button>
          <button class="home-category-card-compact" data-category="tvshows">
            <img src="icons/categories/tvshows.png" class="cat-icon-compact cat-icon-img" alt="TV Shows">
            <span class="cat-name-compact" data-i18n="category_tvshows">TV Shows</span>
          </button>
          <button class="home-category-card-compact" data-category="history">
            <img src="icons/categories/history.png" class="cat-icon-compact cat-icon-img" alt="History">
            <span class="cat-name-compact">History</span>
          </button>
          <button class="home-category-card-compact" data-category="logos">
            <img src="icons/categories/logos.png" class="cat-icon-compact cat-icon-img" alt="Logos">
            <span class="cat-name-compact">Logos</span>
          </button>
        </div>
      </div>

      <!-- Hot Topics Section -->
      <div class="hot-topics-section">
        <h3 class="section-title-compact" data-i18n="home_hot_topics">üî• Hot Topics</h3>
        <div class="hot-topics-list">
          <div class="hot-topic-item" onclick="playClickSound(); document.getElementById('flags-topic-btn').click();">
            <img class="hot-topic-icon" src="icons/topics/geography/flags.png" alt="Flags">
            <div class="hot-topic-info">
              <span class="hot-topic-name" data-i18n="topic_flags">Flags</span>
              <span class="hot-topic-category" data-i18n="category_geography">Geography</span>
            </div>
            <span class="hot-topic-arrow">‚Ä∫</span>
          </div>
          <div class="hot-topic-item" onclick="playClickSound(); document.getElementById('capitals-topic-btn').click();">
            <img class="hot-topic-icon" src="icons/topics/geography/capitals.png" alt="Capitals">
            <div class="hot-topic-info">
              <span class="hot-topic-name" data-i18n="topic_capitals">Capitals</span>
              <span class="hot-topic-category" data-i18n="category_geography">Geography</span>
            </div>
            <span class="hot-topic-arrow">‚Ä∫</span>
          </div>
          <div class="hot-topic-item" onclick="playClickSound(); document.getElementById('logos-topic-btn').click();">
            <img class="hot-topic-icon" src="icons/topics/logos/logos.png" alt="Logos">
            <div class="hot-topic-info">
              <span class="hot-topic-name" data-i18n="topic_logos">Logos</span>
              <span class="hot-topic-category" data-i18n="category_logos">Logos</span>
            </div>
            <span class="hot-topic-arrow">‚Ä∫</span>
          </div>
        </div>
      </div>

      <!-- Ranked Mode Button - Bottom -->
      <div class="ranked-section-bottom">
        <button class="ranked-button-compact" id="ranked-button" onclick="playClickSound(); openRankedModal();">
          <span class="ranked-icon-compact">‚öîÔ∏è</span>
          <span class="ranked-text-compact" data-i18n="home_ranked_mode">Enter Ranked Mode</span>
          <span class="ranked-arrow-compact">‚Ä∫</span>
        </button>
      </div>

    </div>

    <!-- Category Modal Overlay -->
    <div class="category-modal hidden" id="category-modal">
      <div class="category-modal-backdrop" id="category-modal-backdrop"></div>
      <div class="category-modal-content">
        <div class="category-modal-header">
          <h2 class="category-modal-title" id="category-modal-title">Category</h2>
          <button class="category-modal-close" id="category-modal-close">‚úï</button>
        </div>
        <div class="category-modal-quizzes" id="category-modal-quizzes">
          <!-- Quizzes will be inserted here dynamically -->
        </div>
      </div>
    </div>

    <!-- Ranked Modal - Locked State -->
    <div class="ranked-modal hidden" id="ranked-modal-locked">
      <div class="ranked-modal-backdrop" onclick="closeRankedModal()"></div>
      <div class="ranked-modal-content ranked-modal-locked">
        <button class="ranked-modal-close" onclick="closeRankedModal()">‚úï</button>
        <div class="ranked-modal-icon locked">
          <svg viewBox="0 0 24 24" fill="currentColor" width="64" height="64">
            <path d="M12 1C8.676 1 6 3.676 6 7v2H4v14h16V9h-2V7c0-3.324-2.676-6-6-6zm0 2c2.276 0 4 1.724 4 4v2H8V7c0-2.276 1.724-4 4-4zm0 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z"/>
          </svg>
        </div>
        <h2 class="ranked-modal-title">Ranked Mode ‚Äî Locked</h2>
        <p class="ranked-modal-subtitle">Prove your knowledge to qualify for Ranked.</p>
        <p class="ranked-modal-body">Complete <span id="ranked-remaining-quizzes">30</span> quizzes to unlock Ranked Mode.<br>Get ready for divisions, competition, and IQ.</p>
        <div class="ranked-progress-bar">
          <div class="ranked-progress-fill" id="ranked-progress-fill"></div>
          <span class="ranked-progress-text" id="ranked-progress-text">0 / 30</span>
        </div>
        <button class="ranked-modal-btn disabled" disabled>Not Yet Available</button>
      </div>
    </div>

    <!-- Ranked Modal - Qualified State -->
    <div class="ranked-modal hidden" id="ranked-modal-qualified">
      <div class="ranked-modal-backdrop" onclick="closeRankedModal()"></div>
      <div class="ranked-modal-content ranked-modal-qualified">
        <button class="ranked-modal-close" onclick="closeRankedModal()">‚úï</button>
        <div class="ranked-modal-icon qualified">
          <svg viewBox="0 0 24 24" fill="currentColor" width="64" height="64">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
        </div>
        <div class="ranked-confetti"></div>
        <h2 class="ranked-modal-title qualified">You Are Qualified!</h2>
        <p class="ranked-modal-subtitle">Ranked Mode is launching soon.</p>
        <p class="ranked-modal-body">You've completed 30 quizzes and earned eligibility for Ranked Mode. You will be among the first to enter when it releases.</p>
        <button class="ranked-modal-btn notify" onclick="notifyRankedRelease()">Notify Me When Ranked Opens</button>
      </div>
    </div>

    <!-- Settings Modal Overlay -->
    <div class="settings-modal hidden" id="settings-modal">
      <div class="settings-modal-backdrop" id="settings-modal-backdrop"></div>
      <div class="settings-modal-content">
        <div class="settings-modal-header">
          <h2 class="settings-modal-title" data-i18n="settings_title">Settings</h2>
          <button class="settings-modal-close" id="settings-modal-close">‚úï</button>
        </div>
        <div class="settings-modal-body">
          
          <!-- Edit Profile Button -->
          <div class="settings-item settings-item-clickable" id="settings-edit-profile-btn" onclick="playClickSound(); openEditProfileModal();">
            <div class="settings-item-label">
              <span class="settings-item-icon">üë§</span>
              <span>Edit Profile</span>
            </div>
            <div class="settings-item-control">
              <span class="settings-arrow">‚Üí</span>
            </div>
          </div>

          <!-- Language Setting - Opens Language Manager -->
          <div class="settings-item settings-item-clickable" id="settings-language-btn" onclick="playClickSound(); openLanguageManager();">
            <div class="settings-item-label">
              <span class="settings-item-icon">üåç</span>
              <span data-i18n="settings_language">Language</span>
            </div>
            <div class="settings-item-control">
              <span class="current-language-display" id="current-language-display">üá∫üá∏ English</span>
              <span class="settings-arrow">‚Üí</span>
            </div>
          </div>

          <!-- Theme Setting (Coming Soon) -->
          <div class="settings-item settings-item-disabled">
            <div class="settings-item-label">
              <span class="settings-item-icon">üé®</span>
              <span data-i18n="settings_theme">Theme</span>
            </div>
            <div class="settings-item-control">
              <span class="settings-coming-soon" data-i18n="settings_coming_soon">Coming Soon</span>
            </div>
          </div>

          <!-- Sound Setting (Opens Sound Overlay) -->
          <div class="settings-item settings-item-clickable" id="settings-sound-btn">
            <div class="settings-item-label">
              <span class="settings-item-icon">üîä</span>
              <span data-i18n="settings_sound">Sound</span>
            </div>
            <div class="settings-item-control">
              <span class="settings-arrow">‚Üí</span>
            </div>
          </div>

          <!-- Extra Effects Section -->
          <div class="settings-item settings-item-clickable" id="settings-extra-effects-btn">
            <div class="settings-item-label">
              <span class="settings-item-icon">üé®</span>
              <span>Extra Effects</span>
            </div>
            <div class="settings-item-control">
              <span class="settings-arrow" id="extra-effects-arrow">‚Üí</span>
            </div>
          </div>

          <!-- Extra Effects Expandable Content -->
          <div class="settings-extra-effects-content hidden" id="extra-effects-content">
            <!-- Galaxy Background Toggle -->
            <div class="settings-sub-item">
            <div class="settings-item-label">
              <span class="settings-item-icon">‚ú®</span>
              <span>Galaxy Background</span>
            </div>
            <div class="settings-item-control">
              <label class="settings-toggle">
                <input type="checkbox" id="galaxy-mode-toggle" checked>
                <span class="settings-toggle-slider"></span>
              </label>
            </div>
          </div>

            <!-- 3D Card Transitions Toggle -->
            <div class="settings-sub-item">
            <div class="settings-item-label">
              <span class="settings-item-icon">üé¥</span>
              <span>3D Card Transitions</span>
            </div>
            <div class="settings-item-control">
              <label class="settings-toggle">
                <input type="checkbox" id="card3d-mode-toggle">
                <span class="settings-toggle-slider"></span>
              </label>
              </div>
            </div>
            <div class="settings-sub-note">
              <span>üéØ Only available for Flags (Casual mode)</span>
            </div>

            <!-- Disclaimer -->
            <div class="settings-disclaimer">
              <span class="settings-disclaimer-icon">‚ö†Ô∏è</span>
              <span>These effects require more processing power. If you experience lag or battery drain, try disabling them on older devices.</span>
            </div>
          </div>

          <!-- Tutorial Button -->
          <div class="settings-item settings-item-clickable" id="settings-tutorial-btn" onclick="playClickSound(); startTutorial();">
            <div class="settings-item-label">
              <span class="settings-item-icon">üìñ</span>
              <span data-i18n="settings_tutorial">Tutorial</span>
            </div>
            <div class="settings-item-control">
              <span class="settings-arrow">‚Üí</span>
            </div>
          </div>

        </div>
        <div class="settings-modal-footer">
          <span class="settings-version" id="settings-version">Quizzena v1 Beta</span>
        </div>
      </div>
    </div>

    <!-- Language Manager Modal -->
    <div class="language-manager-modal hidden" id="language-manager-modal">
      <div class="language-manager-backdrop" onclick="closeLanguageManager()"></div>
      <div class="language-manager-content">
        <div class="language-manager-header">
          <h2 class="language-manager-title">üåç Language</h2>
          <button class="language-manager-close" onclick="closeLanguageManager()">‚úï</button>
        </div>
        <div class="language-manager-body">
          <p class="language-manager-hint">Download additional languages to use them. English is included by default.</p>
          <div class="language-list" id="language-list">
            <!-- Languages will be populated by JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="edit-profile-modal hidden" id="edit-profile-modal">
      <div class="edit-profile-backdrop" onclick="closeEditProfileModal()"></div>
      <div class="edit-profile-content">
        <div class="edit-profile-header">
          <h2 class="edit-profile-title" data-i18n="edit_profile">Edit Profile</h2>
          <button class="edit-profile-close" onclick="closeEditProfileModal()">‚úï</button>
        </div>
        <div class="edit-profile-body">
          
          <!-- Profile Picture Section -->
          <div class="edit-section">
            <label class="edit-label" data-i18n="edit_profile_picture">Profile Picture</label>
            <div class="profile-picture-edit">
              <div class="profile-picture-preview-edit" id="edit-profile-preview">
                <span class="preview-avatar-edit" id="edit-preview-avatar">üë§</span>
                <img class="preview-image-edit hidden" id="edit-preview-image" alt="Profile">
              </div>
              <div class="profile-picture-actions-edit">
                <label class="upload-photo-btn" for="edit-profile-picture-input">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="17 8 12 3 7 8"/>
                    <line x1="12" y1="3" x2="12" y2="15"/>
                  </svg>
                  <span data-i18n="edit_upload_photo">Upload Photo</span>
                </label>
                <input type="file" id="edit-profile-picture-input" accept="image/*" class="hidden">
                <button type="button" class="remove-photo-btn hidden" id="edit-remove-photo-btn" onclick="removeEditProfilePicture()">‚úï Remove</button>
              </div>
            </div>
          </div>
          
          <!-- Avatar Selection -->
          <div class="edit-section">
            <label class="edit-label">Or choose an emoji:</label>
            <div class="avatar-grid-edit" id="edit-avatar-grid">
              <button class="avatar-btn-edit" data-avatar="üë§">üë§</button>
              <button class="avatar-btn-edit" data-avatar="üë®">üë®</button>
              <button class="avatar-btn-edit" data-avatar="üë©">üë©</button>
              <button class="avatar-btn-edit" data-avatar="üßë">üßë</button>
              <button class="avatar-btn-edit" data-avatar="üéÆ">üéÆ</button>
              <button class="avatar-btn-edit" data-avatar="‚öΩ">‚öΩ</button>
              <button class="avatar-btn-edit" data-avatar="ü¶ä">ü¶ä</button>
              <button class="avatar-btn-edit" data-avatar="üêº">üêº</button>
              <button class="avatar-btn-edit" data-avatar="ü§ñ">ü§ñ</button>
              <button class="avatar-btn-edit" data-avatar="üëΩ">üëΩ</button>
              <button class="avatar-btn-edit" data-avatar="ü¶Å">ü¶Å</button>
              <button class="avatar-btn-edit" data-avatar="üê∏">üê∏</button>
            </div>
          </div>
          
          <!-- Username Section -->
          <div class="edit-section">
            <label class="edit-label" data-i18n="edit_username">Username</label>
            <input type="text" id="edit-username" class="edit-input" placeholder="Enter username" maxlength="15">
          </div>

          <!-- Background Picture Section -->
          <div class="edit-section">
            <label class="edit-label" data-i18n="edit_background">Background Picture</label>
            <div class="background-picture-edit">
              <div class="background-picture-preview-edit" id="edit-background-preview">
                <div class="background-preview-default" id="edit-background-default">
                  <span>üñºÔ∏è</span>
                  <span class="background-preview-text">No background</span>
                </div>
                <img class="background-preview-image hidden" id="edit-background-image" alt="Background">
              </div>
              <div class="background-picture-actions-edit">
                <label class="upload-photo-btn" for="edit-background-picture-input">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                    <polyline points="17 8 12 3 7 8"/>
                    <line x1="12" y1="3" x2="12" y2="15"/>
                  </svg>
                  <span>Upload Background</span>
                </label>
                <input type="file" id="edit-background-picture-input" accept="image/*" class="hidden">
                <button type="button" class="remove-photo-btn hidden" id="edit-remove-background-btn" onclick="removeEditBackgroundPicture()">‚úï Remove</button>
              </div>
            </div>
          </div>
          
        </div>
        <div class="edit-profile-footer">
          <button class="edit-cancel-btn" onclick="closeEditProfileModal()" data-i18n="common_cancel">Cancel</button>
          <button class="edit-save-btn" id="edit-save-btn" onclick="saveEditedProfile()" data-i18n="edit_save_changes">Save Changes</button>
        </div>
      </div>
    </div>

    <!-- Sound Settings Overlay (Main) -->
    <div class="sound-overlay hidden" id="sound-overlay">
      <div class="sound-overlay-backdrop" id="sound-overlay-backdrop"></div>
      <div class="sound-overlay-content">
        <div class="sound-overlay-header">
          <button class="sound-overlay-back" id="sound-overlay-back">‚Üê</button>
          <h2 class="sound-overlay-title" data-i18n="settings_sound">Sound</h2>
          <div class="sound-overlay-spacer"></div>
        </div>
        <div class="sound-overlay-body">
          
          <!-- Music Button -->
          <div class="sound-nav-item" id="sound-nav-music" onclick="playClickSound(); openMusicOverlay();">
            <div class="sound-nav-label">
              <span class="sound-nav-icon">üéµ</span>
              <span>Music</span>
            </div>
            <span class="sound-nav-arrow">‚Üí</span>
          </div>

          <!-- Sound Effects Button -->
          <div class="sound-nav-item" id="sound-nav-sfx" onclick="playClickSound(); openSfxOverlay();">
            <div class="sound-nav-label">
              <span class="sound-nav-icon">üîä</span>
              <span>Sound Effects</span>
            </div>
            <span class="sound-nav-arrow">‚Üí</span>
          </div>

        </div>
      </div>
    </div>

    <!-- Music Settings Overlay -->
    <div class="sound-overlay hidden" id="music-overlay">
      <div class="sound-overlay-backdrop" onclick="closeMusicOverlay();"></div>
      <div class="sound-overlay-content">
        <div class="sound-overlay-header">
          <button class="sound-overlay-back" onclick="closeMusicOverlay();">‚Üê</button>
          <h2 class="sound-overlay-title">üéµ Music</h2>
          <div class="sound-overlay-spacer"></div>
        </div>
        <div class="sound-overlay-body">
          
          <!-- Music -->
          <div class="sound-setting-section">
            <div class="sound-setting-header">
              <span class="sound-setting-icon">üéµ</span>
              <span class="sound-setting-name">Music</span>
            </div>
            <div class="sound-setting-content">
              <div class="volume-control">
                <span class="volume-label">Volume</span>
                <div class="volume-slider-container">
                  <input type="range" class="volume-slider" id="music-volume-slider" min="0" max="100" value="30">
                  <span class="volume-value" id="music-volume-value">30%</span>
                </div>
              </div>
              <button class="mute-btn" id="music-mute-btn">
                <span class="mute-icon" id="music-mute-icon">üéµ</span>
                <span class="mute-text">Mute</span>
              </button>
            </div>
          </div>

          <!-- Music+ (Coming Soon) -->
          <div class="sound-setting-section sound-setting-disabled">
            <div class="sound-setting-header">
              <span class="sound-setting-icon">üé∂</span>
              <span class="sound-setting-name">Music+</span>
            </div>
            <div class="sound-setting-content">
              <span class="settings-coming-soon">Coming Soon</span>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Sound Effects Settings Overlay -->
    <div class="sound-overlay hidden" id="sfx-overlay">
      <div class="sound-overlay-backdrop" onclick="closeSfxOverlay();"></div>
      <div class="sound-overlay-content">
        <div class="sound-overlay-header">
          <button class="sound-overlay-back" onclick="closeSfxOverlay();">‚Üê</button>
          <h2 class="sound-overlay-title">üîä Sound Effects</h2>
          <div class="sound-overlay-spacer"></div>
        </div>
        <div class="sound-overlay-body">
          
          <!-- Master Sound Effects Toggle -->
          <div class="sound-setting-section sound-setting-master">
            <div class="sound-setting-header">
              <span class="sound-setting-icon">üîä</span>
              <span class="sound-setting-name">Sound Effects</span>
              <span class="sound-setting-badge">Master</span>
            </div>
            <div class="sound-setting-content">
              <div class="volume-control">
                <span class="volume-label">Volume</span>
                <div class="volume-slider-container">
                  <input type="range" class="volume-slider" id="sfx-master-volume-slider" min="0" max="100" value="70">
                  <span class="volume-value" id="sfx-master-volume-value">70%</span>
                </div>
              </div>
              <button class="mute-btn" id="sfx-master-mute-btn">
                <span class="mute-icon" id="sfx-master-mute-icon">üîä</span>
                <span class="mute-text">Mute All</span>
              </button>
            </div>
          </div>

          <!-- Click Sound -->
          <div class="sound-setting-section">
            <div class="sound-setting-header">
              <span class="sound-setting-icon">üëÜ</span>
              <span class="sound-setting-name">Click</span>
            </div>
            <div class="sound-setting-content">
              <div class="volume-control">
                <span class="volume-label">Volume</span>
                <div class="volume-slider-container">
                  <input type="range" class="volume-slider" id="sfx-volume-slider" min="0" max="100" value="70">
                  <span class="volume-value" id="sfx-volume-value">70%</span>
                </div>
              </div>
              <button class="mute-btn" id="sfx-mute-btn">
                <span class="mute-icon" id="sfx-mute-icon">üëÜ</span>
                <span class="mute-text">Mute</span>
              </button>
            </div>
          </div>

          <!-- XP Fill Sound -->
          <div class="sound-setting-section">
            <div class="sound-setting-header">
              <span class="sound-setting-icon">‚¨ÜÔ∏è</span>
              <span class="sound-setting-name">XP Fill</span>
            </div>
            <div class="sound-setting-content">
              <div class="volume-control">
                <span class="volume-label">Volume</span>
                <div class="volume-slider-container">
                  <input type="range" class="volume-slider" id="xpfill-volume-slider" min="0" max="100" value="70">
                  <span class="volume-value" id="xpfill-volume-value">70%</span>
                </div>
              </div>
              <button class="mute-btn" id="xpfill-mute-btn">
                <span class="mute-icon" id="xpfill-mute-icon">‚¨ÜÔ∏è</span>
                <span class="mute-text">Mute</span>
              </button>
            </div>
          </div>

          <!-- Level Up Sound -->
          <div class="sound-setting-section">
            <div class="sound-setting-header">
              <span class="sound-setting-icon">üéâ</span>
              <span class="sound-setting-name">Level Up</span>
            </div>
            <div class="sound-setting-content">
              <div class="volume-control">
                <span class="volume-label">Volume</span>
                <div class="volume-slider-container">
                  <input type="range" class="volume-slider" id="levelup-volume-slider" min="0" max="100" value="70">
                  <span class="volume-value" id="levelup-volume-value">70%</span>
                </div>
              </div>
              <button class="mute-btn" id="levelup-mute-btn">
                <span class="mute-icon" id="levelup-mute-icon">üéâ</span>
                <span class="mute-text">Mute</span>
              </button>
            </div>
          </div>

          <!-- Correct Answer Sound -->
          <div class="sound-setting-section">
            <div class="sound-setting-header">
              <span class="sound-setting-icon">‚úÖ</span>
              <span class="sound-setting-name">Correct Answer</span>
            </div>
            <div class="sound-setting-content">
              <div class="volume-control">
                <span class="volume-label">Volume</span>
                <div class="volume-slider-container">
                  <input type="range" class="volume-slider" id="correct-volume-slider" min="0" max="100" value="70">
                  <span class="volume-value" id="correct-volume-value">70%</span>
                </div>
              </div>
              <button class="mute-btn" id="correct-mute-btn">
                <span class="mute-icon" id="correct-mute-icon">‚úÖ</span>
                <span class="mute-text">Mute</span>
              </button>
            </div>
          </div>

          <!-- Wrong Answer Sound -->
          <div class="sound-setting-section">
            <div class="sound-setting-header">
              <span class="sound-setting-icon">‚ùå</span>
              <span class="sound-setting-name">Wrong Answer</span>
            </div>
            <div class="sound-setting-content">
              <div class="volume-control">
                <span class="volume-label">Volume</span>
                <div class="volume-slider-container">
                  <input type="range" class="volume-slider" id="wrong-volume-slider" min="0" max="100" value="70">
                  <span class="volume-value" id="wrong-volume-value">70%</span>
                </div>
              </div>
              <button class="mute-btn" id="wrong-mute-btn">
                <span class="mute-icon" id="wrong-mute-icon">‚ùå</span>
                <span class="mute-text">Mute</span>
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- TOPICS SCREEN VIEW -->
    <div class="topics-view hidden" id="topics-view">

      <!-- Geography Category -->
      <div class="geography-section">
        <h3 class="geography-title" data-i18n="category_geography">Geography</h3>
        <div class="topics-scroll-row stagger-reveal">

          <!-- Flags Card - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="flags-topic-btn" class="breakout-card breakout-card-flags" style="cursor: pointer; font-family: inherit;">
              <!-- Teal/Cyan glow behind -->
              <div class="breakout-card-glow breakout-card-glow-flags"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/geography/flags.png" alt="Flags" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_flags">Flags</div>
            </button>
          </div>

          <!-- Capitals Card - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="capitals-topic-btn" class="breakout-card breakout-card-capitals" style="cursor: pointer; font-family: inherit;">
              <!-- Amber/Gold glow behind -->
              <div class="breakout-card-glow breakout-card-glow-capitals"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/geography/capitals.png" alt="Capitals" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_capitals">Capitals</div>
            </button>
          </div>

          <!-- Area Card - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="area-topic-btn" class="breakout-card breakout-card-area" style="cursor: pointer; font-family: inherit;">
              <!-- Neon purple globe glow behind -->
              <div class="breakout-card-glow breakout-card-glow-area"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/geography/area.png" alt="Country Area" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_area">Country Area</div>
            </button>
          </div>

          <!-- Borders Card -->
          <div class="topic-card-small">
            <button id="borders-topic-btn" class="topic-card-btn">
              <div class="topic-icon-small">üó∫Ô∏è</div>
              <div class="topic-name-small" data-i18n="topic_borders">Borders</div>
            </button>
          </div>

        </div>
      </div>

      <!-- Football Section -->
      <div class="football-section">
        <h3 class="section-title" data-i18n="category_football">‚öΩ Football</h3>
        <div class="topics-scroll-row stagger-reveal">

          <!-- Card 1: Football General - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="football-general-topic-btn" class="breakout-card breakout-card-football" style="cursor: pointer; font-family: inherit;">
              <!-- Stadium red glow behind -->
              <div class="breakout-card-glow breakout-card-glow-football"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/football/football.png" alt="Football" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_football">Football</div>
            </button>
          </div>

          <!-- Card 2: Premier League - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="premier-league-topic-btn" class="breakout-card" style="cursor: pointer; font-family: inherit;">
              <!-- Purple glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/football/premier-league.png" alt="Premier League" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_premier_league">Premier League</div>
            </button>
          </div>

          <!-- Card 3: Champions League - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="champions-league-topic-btn" class="breakout-card breakout-card-ucl" style="cursor: pointer; font-family: inherit;">
              <!-- Blue/Silver glow behind -->
              <div class="breakout-card-glow breakout-card-glow-ucl"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/football/champions-league.png" alt="Champions League" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_champions_league">Champions League</div>
            </button>
          </div>

          <!-- Card 4: World Cup - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="world-cup-topic-btn" class="breakout-card breakout-card-worldcup" style="cursor: pointer; font-family: inherit;">
              <!-- Golden trophy glow behind -->
              <div class="breakout-card-glow breakout-card-glow-worldcup"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/football/world-cup.png" alt="World Cup" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_world_cup">World Cup</div>
            </button>
          </div>

          <!-- Card 5: Derbies - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="derbies-topic-btn" class="breakout-card breakout-card-derbies" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/football/derbies.png" alt="Derbies" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_derbies">Derbies</div>
            </button>
          </div>

          <!-- Card 6: Lionel Messi - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="messi-topic-btn" class="breakout-card breakout-card-messi" style="cursor: pointer; font-family: inherit;">
              <!-- Argentina blue/white glow behind -->
              <div class="breakout-card-glow breakout-card-glow-messi"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/football/messi.png" alt="Messi" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_messi">Messi</div>
            </button>
          </div>

          <!-- Card 7: Cristiano Ronaldo - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="ronaldo-topic-btn" class="breakout-card breakout-card-ronaldo" style="cursor: pointer; font-family: inherit;">
              <!-- Portugal red/gold glow behind -->
              <div class="breakout-card-glow breakout-card-glow-ronaldo"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/football/ronaldo.png" alt="Ronaldo" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_ronaldo">Ronaldo</div>
            </button>
          </div>

        </div>
      </div>

      <!-- Movies Section -->
      <div class="movies-section">
        <h3 class="section-title" data-i18n="category_movies">üé¨ Movies</h3>
        <div class="topics-scroll-row stagger-reveal">

          <!-- Card 1: Movies General - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="movies-general-topic-btn" class="breakout-card breakout-card-movies" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/movies/movies.png" alt="Movies" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_movies">Movies</div>
            </button>
          </div>

          <!-- Card 2: Marvel Movies - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="marvel-movies-topic-btn" class="breakout-card breakout-card-marvel" style="cursor: pointer; font-family: inherit;">
              <!-- Red/gold hero glow behind -->
              <div class="breakout-card-glow"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/movies/marvel.png" alt="Marvel" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title">Marvel</div>
            </button>
          </div>

          <!-- Card 3: DC Movies - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="dc-movies-topic-btn" class="breakout-card breakout-card-dc" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/movies/dc.png" alt="DC" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_dc">DC</div>
            </button>
          </div>

          <!-- Card 4: Disney Movies - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="disney-movies-topic-btn" class="breakout-card breakout-card-disney" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/movies/disney.png" alt="Disney" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_disney">Disney</div>
            </button>
          </div>

          <!-- Card 5: Harry Potter - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="harry-potter-topic-btn" class="breakout-card breakout-card-harrypotter" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/movies/harry-potter.png" alt="Harry Potter" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_harry_potter">Harry Potter</div>
            </button>
          </div>

          <!-- Card 6: Star Wars - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="star-wars-topic-btn" class="breakout-card breakout-card-starwars" style="cursor: pointer; font-family: inherit;">
              <!-- Blue/red lightsaber glow behind -->
              <div class="breakout-card-glow breakout-card-glow-starwars"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/movies/star-wars.png" alt="Star Wars" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_star_wars">Star Wars</div>
            </button>
          </div>

          <!-- Card 7: Lord of the Rings - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="lotr-topic-btn" class="breakout-card breakout-card-lotr" style="cursor: pointer; font-family: inherit;">
              <!-- Fiery gold ring glow behind -->
              <div class="breakout-card-glow breakout-card-glow-lotr"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/movies/lotr.png" alt="Lord of the Rings" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_lotr">LOTR</div>
            </button>
          </div>

        </div>
      </div>

      <!-- TV Shows Section -->
      <div class="tvshows-section">
        <h3 class="section-title">üì∫ TV Shows</h3>
        <div class="topics-scroll-row stagger-reveal">

          <!-- Card 1: TV Shows General - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="tv-general-topic-btn" class="breakout-card breakout-card-tvshows" style="cursor: pointer; font-family: inherit;">
              <!-- Warm vintage glow behind -->
              <div class="breakout-card-glow breakout-card-glow-tvshows"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/tvshows/tvshows.png" alt="TV Shows" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_tv_shows">TV Shows</div>
            </button>
          </div>

          <!-- Card 2: Sitcoms - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="sitcoms-topic-btn" class="breakout-card breakout-card-sitcoms" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/tvshows/sitcoms.png" alt="Sitcoms" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_sitcoms">Sitcoms</div>
            </button>
          </div>

          <!-- Card 3: Game of Thrones - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="game-of-thrones-topic-btn" class="breakout-card breakout-card-got" style="cursor: pointer; font-family: inherit;">
              <!-- Fire and ice glow behind -->
              <div class="breakout-card-glow breakout-card-glow-got"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/tvshows/game-of-thrones.png" alt="Game of Thrones" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_got">Game of Thrones</div>
            </button>
          </div>

          <!-- Card 4: Breaking Bad - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="breaking-bad-topic-btn" class="breakout-card breakout-card-breakingbad" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/tvshows/breaking-bad.png" alt="Breaking Bad" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title">Breaking Bad</div>
            </button>
          </div>

          <!-- Card 5: Stranger Things - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="stranger-things-topic-btn" class="breakout-card breakout-card-strangerthings" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/tvshows/stranger-things.png" alt="Stranger Things" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_stranger_things">Stranger Things</div>
            </button>
          </div>

          <!-- Card 6: Money Heist - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="money-heist-topic-btn" class="breakout-card breakout-card-moneyheist" style="cursor: pointer; font-family: inherit;">
              <!-- Red heist glow behind -->
              <div class="breakout-card-glow breakout-card-glow-moneyheist"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/tvshows/money-heist.png" alt="Money Heist" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_money_heist">Money Heist</div>
            </button>
          </div>

          <!-- Card 7: The Office - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="the-office-topic-btn" class="breakout-card breakout-card-office" style="cursor: pointer; font-family: inherit;">
              <!-- Beige/brown office glow behind -->
              <div class="breakout-card-glow breakout-card-glow-office"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/tvshows/the-office.png" alt="The Office" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_the_office">The Office</div>
            </button>
          </div>

        </div>
      </div>

      <!-- History Section -->
      <div class="history-section">
        <h3 class="section-title" data-i18n="category_history">üìú History</h3>
        <div class="topics-scroll-row stagger-reveal">

          <!-- Card 1: World History - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="world-history-topic-btn" class="breakout-card breakout-card-worldhistory" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>
              
              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/world-history.png" alt="World History" class="floating-card-image">
              </div>
              
              <!-- Title below -->
              <div class="floating-card-title">World History</div>
            </button>
          </div>

          <!-- Card 2: World War II - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="ww2-topic-btn" class="breakout-card breakout-card-wwii" style="cursor: pointer; font-family: inherit;">
              <!-- Military olive/red poppy glow behind -->
              <div class="breakout-card-glow breakout-card-glow-wwii"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/wwii.png" alt="WWII" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_wwii">WWII</div>
            </button>
          </div>

          <!-- Card 3: World War I - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="ww1-topic-btn" class="breakout-card breakout-card-wwi" style="cursor: pointer; font-family: inherit;">
              <!-- Sepia/brown glow behind -->
              <div class="breakout-card-glow breakout-card-glow-wwi"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/wwi.png" alt="WWI" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_wwi">WWI</div>
            </button>
          </div>

          <!-- Card 4: Roman Empire - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="roman-empire-topic-btn" class="breakout-card breakout-card-roman" style="cursor: pointer; font-family: inherit;">
              <!-- Golden glow behind -->
              <div class="breakout-card-glow breakout-card-glow-roman"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/roman-empire.png" alt="Roman Empire" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_roman_empire">Roman Empire</div>
            </button>
          </div>

          <!-- Card 5: Ottoman Empire - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="ottoman-empire-topic-btn" class="breakout-card breakout-card-ottoman" style="cursor: pointer; font-family: inherit;">
              <!-- Navy blue/gold glow behind -->
              <div class="breakout-card-glow breakout-card-glow-ottoman"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/ottoman-empire.png" alt="Ottoman Empire" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_ottoman">Ottoman</div>
            </button>
          </div>

          <!-- Card 6: Egyptian History - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="egyptian-topic-btn" class="breakout-card breakout-card-egyptian" style="cursor: pointer; font-family: inherit;">
              <!-- Golden sand/pyramid glow behind -->
              <div class="breakout-card-glow breakout-card-glow-egyptian"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/egyptian.png" alt="Egyptian" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title">Egyptian</div>
            </button>
          </div>

          <!-- Card 7: British Monarchy - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="british-monarchy-topic-btn" class="breakout-card breakout-card-british" style="cursor: pointer; font-family: inherit;">
              <!-- Royal glow behind -->
              <div class="breakout-card-glow breakout-card-glow-british"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/british-monarchy.png" alt="British Monarchy" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_british_monarchy">British Monarchy</div>
            </button>
          </div>

          <!-- Card 8: Ancient Civilizations - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="ancient-civs-topic-btn" class="breakout-card breakout-card-ancient" style="cursor: pointer; font-family: inherit;">
              <!-- Golden sunset glow behind -->
              <div class="breakout-card-glow breakout-card-glow-ancient"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/ancient-civilizations.png" alt="Ancient Civilizations" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_ancient_civs">Ancient Civs</div>
            </button>
          </div>

          <!-- Card 9: Cold War - Floating Circular Design -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="cold-war-topic-btn" class="breakout-card breakout-card-coldwar" style="cursor: pointer; font-family: inherit;">
              <!-- Cold blue glow behind -->
              <div class="breakout-card-glow breakout-card-glow-coldwar"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/history/cold-war.png" alt="Cold War" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_cold_war">Cold War</div>
            </button>
          </div>

        </div>
      </div>

      <!-- Logos Section -->
      <div class="logos-section">
        <h3 class="section-title" data-i18n="category_logos">‚ú® Logos</h3>
        <div class="topics-scroll-row stagger-reveal">

          <!-- Card 1: Logos General -->
          <div class="status-active" style="flex-shrink: 0;">
            <button id="logos-topic-btn" class="breakout-card" style="cursor: pointer; font-family: inherit;">
              <!-- Glow behind -->
              <div class="breakout-card-glow"></div>

              <!-- Circular image container with gradient mask -->
              <div class="floating-card-circle">
                <img src="icons/topics/logos/logos.png" alt="Logos" class="floating-card-image">
              </div>

              <!-- Title below -->
              <div class="floating-card-title" data-i18n="topic_logos">Logos</div>
            </button>
          </div>

        </div>
      </div>

    </div>

    <!-- PROFILE SCREEN VIEW -->
    <div class="profile-view hidden" id="profile-view">

      <!-- Floating Particles Background -->
      <div class="profile-particles"></div>

      <!-- Profile Top Bar -->
      <div class="profile-top-bar">
        <div class="profile-settings">‚öôÔ∏è</div>
        <div class="profile-spacer"></div>
      </div>

      <!-- Profile Header Section -->
      <div class="profile-header">

        <!-- Background Banner with Animated Glow -->
        <div class="profile-banner" id="profile-banner"></div>

        <!-- Glowing Avatar with Edit Button -->
        <div class="profile-avatar-wrapper">
          <div class="profile-avatar">üë§</div>
          <button class="profile-avatar-edit-btn" onclick="playClickSound(); openEditProfileModal();" title="Edit Profile">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
          </button>
        </div>

        <!-- Identity Block -->
        <div class="profile-info">
          <h2 class="profile-name">Username</h2>
          <div class="profile-name-row">
            <div class="level-badge profile-level-badge" onclick="playClickSound(); openJourneyModal();">
              <div class="level-badge-ring">
                <svg viewBox="0 0 48 48">
                  <circle class="level-ring-bg" cx="24" cy="24" r="22"/>
                  <circle class="level-ring-progress" id="profile-level-ring" cx="24" cy="24" r="22"/>
                </svg>
              </div>
              <div class="level-badge-inner">
                <span class="level-badge-text">LV</span>
                <span class="level-badge-number" id="profile-level-number">1</span>
              </div>
            </div>
          </div>
          <div class="profile-location">üåç Location not set</div>
          <div class="profile-divider"></div>
        </div>

        <!-- Three Feature Cards -->
        <div class="profile-feature-cards">
          <div class="feature-card achievements-card" onclick="playClickSound(); openAchievementsRitual();">
            <span class="feature-card-icon">üèÜ</span>
            <div class="feature-card-title" data-i18n="profile_achievements">Achievements</div>
            <div class="feature-card-value" id="profile-achievements-count">0</div>
          </div>
          <div class="feature-card streaks-card" onclick="playClickSound();">
            <span class="feature-card-icon">üî•</span>
            <div class="feature-card-title" data-i18n="profile_streaks">Streaks</div>
            <div class="feature-card-value" id="profile-best-streak">0</div>
          </div>
          <div class="feature-card quanta-card" onclick="playClickSound(); openQuantaModal();">
            <span class="feature-card-icon">‚ú¶</span>
            <div class="feature-card-title" data-i18n="profile_quanta">Quanta</div>
            <div class="feature-card-value" id="profile-quanta">0</div>
          </div>
        </div>

      </div>

      <!-- Quick Stats Floating Card -->
      <div class="profile-stats-row">
        <div class="stat-item">
          <div class="stat-label">GAMES</div>
          <div class="stat-value">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label" data-i18n="profile_time">TIME</div>
          <div class="stat-value" id="profile-stat-time">0s</div>
        </div>
        <div class="stat-item">
          <div class="stat-label" data-i18n="profile_followers">FOLLOWERS</div>
          <div class="stat-value">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label" data-i18n="profile_following">FOLLOWING</div>
          <div class="stat-value">0</div>
        </div>
      </div>


      <!-- Stats Content (Moved from Stats Tab) -->
      <div class="profile-stats-section">

        <!-- Stats Chart Button -->
        <button class="stats-chart-button" onclick="playClickSound(); openStatsChart()">
          <span class="stats-chart-btn-icon">üìà</span>
          <span class="stats-chart-btn-text" data-i18n="view_stats_chart">View Stats Chart</span>
          <span class="stats-chart-btn-arrow">‚Üí</span>
        </button>

      </div>

      <!-- Topic Progress Section -->
      <div class="topic-progress-section">
        <h3 class="topic-progress-title" data-i18n="topic_progress">Topic Progress</h3>
        <div class="topic-progress-list" id="topic-progress-list">
          <!-- Populated by JavaScript -->
        </div>
      </div>


    </div>

    <!-- SOCIAL TEASER MODAL -->
    <div class="social-modal hidden" id="social-modal">
      <div class="social-modal-backdrop" onclick="closeSocialTeaser()"></div>
      <div class="social-modal-content">
        <button class="social-modal-close" onclick="closeSocialTeaser()">‚úï</button>
        <div class="social-modal-gradient-bg"></div>
        <div class="social-modal-sparkles"></div>
        <div class="social-modal-icon">
          <svg viewBox="0 0 24 24" width="64" height="64">
            <defs>
              <linearGradient id="socialModalGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#f09433"/>
                <stop offset="25%" style="stop-color:#e6683c"/>
                <stop offset="50%" style="stop-color:#dc2743"/>
                <stop offset="75%" style="stop-color:#cc2366"/>
                <stop offset="100%" style="stop-color:#bc1888"/>
              </linearGradient>
            </defs>
            <!-- Main chat bubble -->
            <path d="M4 4h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3l-3 3v-3H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z" fill="url(#socialModalGradient)"/>
            <!-- Secondary bubble (overlapping) -->
            <path d="M20 8h-2v6a2 2 0 0 1-2 2H9l1 1h6l3 3v-3h1a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z" fill="url(#socialModalGradient)" opacity="0.7"/>
            <!-- Connection dots -->
            <circle cx="6" cy="10" r="1.2" fill="white"/>
            <circle cx="10" cy="10" r="1.2" fill="white"/>
            <circle cx="14" cy="10" r="1.2" fill="white"/>
          </svg>
          <span class="social-sparkle">‚ú®</span>
        </div>
        <h2 class="social-modal-title" data-i18n="social_coming_soon">Quizzena Social ‚Äî Coming Soon</h2>
        <p class="social-modal-subtitle" data-i18n="social_subtitle">A new way to explore quizzes.</p>
        <div class="social-modal-features">
          <p>Scroll through quizzes like a feed.</p>
          <p>React. Share. Discover. Follow knowledge.</p>
          <p>Quiz content becomes social.</p>
        </div>
        <button class="social-modal-btn disabled" disabled>Not Yet Available</button>
      </div>
    </div>

    <!-- SOCIAL FEED VIEW (Placeholder for future) -->
    <div class="social-view hidden" id="social-view">
      <div class="social-header">
        <h1>Social Feed</h1>
        <p>Coming Soon</p>
      </div>
    </div>

    <!-- LEADERBOARD SCREEN VIEW -->
    <div class="leaderboard-view hidden" id="leaderboard-view">

      <!-- Page Header -->
      <div class="lb-page-header">
        <h1 class="lb-page-title" data-i18n="lb_title">LEADERBOARD</h1>
        <p class="lb-page-subtitle" data-i18n="lb_subtitle">Founders Season ¬∑ Preparing</p>
      </div>

      <!-- Leaderboard Content Area -->
      <div class="lb-content">

        <!-- Main Center Card -->
        <div class="lb-main-card">
          <div class="lb-main-card-glow"></div>
          <div class="lb-trophy-icon">
            <span class="lb-trophy-glow">üëë</span>
          </div>
          <h2 class="lb-main-heading" data-i18n="lb_founders_title">Founders Leaderboard</h2>
          <p class="lb-main-description" data-i18n="lb_founders_desc">The first competitive season of Quizzena is being prepared.</p>
          <div class="lb-status-section">
            <div class="lb-status-badge">
              <span class="lb-status-dot"></span>
              <span data-i18n="lb_status">STATUS: COLLECTING FOUNDERS DATA</span>
            </div>
            <p class="lb-status-helper" data-i18n="lb_status_helper">Your activity now will shape the first rankings.</p>
            <p class="lb-status-founders" data-i18n="lb_founders_recognition">Early players gain Founders recognition.</p>
          </div>
        </div>

        <!-- Locked Preview List -->
        <div class="lb-preview-card">
          <div class="lb-preview-list">
            <div class="lb-preview-row" style="display:flex !important;">
              <span class="lb-rank lb-rank-gold">#1</span>
              <span class="lb-username">???</span>
              <span class="lb-lock">üîí</span>
            </div>
            <div class="lb-preview-row" style="display:flex !important;">
              <span class="lb-rank lb-rank-silver">#2</span>
              <span class="lb-username">???</span>
              <span class="lb-lock">üîí</span>
            </div>
            <div class="lb-preview-row" style="display:flex !important;">
              <span class="lb-rank lb-rank-bronze">#3</span>
              <span class="lb-username">???</span>
              <span class="lb-lock">üîí</span>
            </div>
            <div class="lb-preview-row" style="display:flex !important;">
              <span class="lb-rank">#4</span>
              <span class="lb-username">???</span>
              <span class="lb-lock">üîí</span>
            </div>
            <div class="lb-preview-row" style="display:flex !important;">
              <span class="lb-rank">#5</span>
              <span class="lb-username">???</span>
              <span class="lb-lock">üîí</span>
            </div>
          </div>
          <p class="lb-preview-note" data-i18n="lb_rankings_unlock">Rankings unlock when Founders Season begins.</p>
        </div>

        <!-- What Counts Info Card -->
        <div class="lb-info-card">
          <h3 class="lb-info-title" data-i18n="lb_what_matters">WHAT WILL MATTER</h3>
          <ul class="lb-info-list">
            <li><span class="lb-info-icon">üéÆ</span> <span data-i18n="lb_games_played">Games played</span></li>
            <li><span class="lb-info-icon">üéØ</span> <span data-i18n="lb_accuracy">Accuracy</span></li>
            <li><span class="lb-info-icon">üî•</span> <span data-i18n="lb_streaks">Streaks</span></li>
            <li><span class="lb-info-icon">üèÜ</span> <span data-i18n="lb_achievements">Achievements</span></li>
          </ul>
        </div>

        <!-- CTA Button -->
        <button class="lb-cta-btn" onclick="showFoundersEarlyModal()">
          <span class="lb-cta-glow"></span>
          <span data-i18n="lb_season_soon">SEASON STARTING SOON</span>
        </button>

      </div>

    </div>

    <!-- ================================ -->
    <!-- üèõÔ∏è ACHIEVEMENTS RITUAL PAGE -->
    <!-- ================================ -->
    <div class="achievements-ritual-view hidden" id="achievements-ritual-view">
      <!-- Ambient Background -->
      <div class="ritual-ambient-bg">
        <div class="ritual-ambient-orb"></div>
        <div class="ritual-ambient-orb"></div>
        <div class="ritual-ambient-orb"></div>
      </div>

      <!-- Floating Particles -->
      <div class="ritual-particles" id="ritual-particles"></div>

      <!-- Header with Back Button -->
      <div class="ritual-header">
        <button class="ritual-back-btn" onclick="closeAchievementsRitual()">‚Üê</button>
        <div class="ritual-title-container">
          <h1 class="ritual-title" data-i18n="achievements_ritual">Achievements</h1>
          <p class="ritual-subtitle" data-i18n="achievements_subtitle">The Seven Paths of Mastery</p>
        </div>
      </div>

      <!-- 8 Houses Grid -->
      <div class="ritual-houses-container">
        <!-- House 1: Path of Progression -->
        <div class="ritual-house-card house-progression" onclick="openHousePage('progression', 'üî∑', 'Path of Progression')">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <span class="ritual-house-icon">üî∑</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_progression">Progression</span>
        </div>

        <!-- House 2: Path of Skill -->
        <div class="ritual-house-card house-skill" onclick="openHousePage('skill', '‚¨°', 'Path of Skill')">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape skill-hexagon">
            <span class="ritual-house-icon">‚¨°</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_skill">Skill</span>
        </div>

        <!-- House 3: Path of Exploration -->
        <div class="ritual-house-card house-exploration" onclick="openHousePage('exploration', 'üß≠', 'Path of Exploration')">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <span class="compass-cardinal-n">N</span>
            <span class="compass-cardinal-e">E</span>
            <span class="compass-cardinal-s">S</span>
            <span class="compass-cardinal-w">W</span>
            <span class="ritual-house-icon">üß≠</span>
          </div>
          <span class="ritual-house-name">Exploration</span>
        </div>

        <!-- House 4: Path of Time Attack -->
        <div class="ritual-house-card house-time" onclick="openHousePage('time', '‚è±Ô∏è', 'Path of Time Attack')">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <span class="ritual-house-icon">‚è±Ô∏è</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_time_attack">Time Attack</span>
        </div>

        <!-- House 6: Path of Survival -->
        <div class="ritual-house-card house-survival" onclick="openHousePage('survival', '‚ù§Ô∏è‚Äçüî•', 'Path of Survival')">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <div class="survival-crack-line"></div>
            <span class="ritual-house-icon">‚ù§Ô∏è‚Äçüî•</span>
          </div>
          <span class="ritual-house-name">Survival</span>
        </div>

        <!-- House 6: Path of Casual Mastery -->
        <div class="ritual-house-card house-casual" onclick="openHousePage('casual', 'üåø', 'Path of Casual Mastery')">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <span class="ritual-house-icon">üåø</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_casual">Casual</span>
        </div>

        <!-- House 7: Path of Behaviour -->
        <div class="ritual-house-card house-behaviour" onclick="openHousePage('behaviour', 'üîÆ', 'Path of Behaviour')">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <div class="behaviour-cosmic-particle"></div>
            <div class="behaviour-cosmic-particle"></div>
            <div class="behaviour-cosmic-particle"></div>
            <div class="behaviour-cosmic-particle"></div>
            <span class="ritual-house-icon">üîÆ</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_behaviour">Behaviour</span>
        </div>
      </div>
    </div>

    <!-- ================================ -->
    <!-- üè† HOUSE SUB-PAGE (Coming Soon) -->
    <!-- ================================ -->
    <div class="house-subpage hidden" id="house-subpage" data-house="">
      <div class="house-subpage-header">
        <button class="house-back-btn" onclick="closeHousePage()">‚Üê</button>
        <h2 class="house-subpage-title" id="house-subpage-title">Path Name</h2>
      </div>
      <div class="house-subpage-content">
        <div class="house-coming-soon-icon" id="house-subpage-icon">üî∑</div>
        <h3 class="house-coming-soon-title" data-i18n="settings_coming_soon">Coming Soon</h3>
        <p class="house-coming-soon-text" data-i18n="achievements_house_coming">
          Achievements for this path are being forged in the cosmic fires. Return soon to claim your destiny.
        </p>
      </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <div class="bottom-nav">
      <div class="nav-item active" id="nav-home">
        üè†<br><span data-i18n="nav_home">Home</span>
      </div>
      <div class="nav-item" id="nav-topics">
        üåç<br><span data-i18n="nav_topics">Topics</span>
      </div>
      <div class="nav-item" id="nav-social" onclick="playClickSound(); openSocialTeaser();">
        <svg viewBox="0 0 24 24" width="28" height="28" style="display:block;margin:0 auto 2px;">
          <defs>
            <linearGradient id="socialGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#f09433"/>
              <stop offset="25%" style="stop-color:#e6683c"/>
              <stop offset="50%" style="stop-color:#dc2743"/>
              <stop offset="75%" style="stop-color:#cc2366"/>
              <stop offset="100%" style="stop-color:#bc1888"/>
            </linearGradient>
          </defs>
          <path d="M4 4h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3l-3 3v-3H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z" fill="url(#socialGradient)"/>
          <path d="M20 8h-2v6a2 2 0 0 1-2 2H9l1 1h6l3 3v-3h1a2 2 0 0 0 2-2v-5a2 2 0 0 0-2-2z" fill="url(#socialGradient)" opacity="0.7"/>
          <circle cx="6" cy="10" r="1.2" fill="white"/>
          <circle cx="10" cy="10" r="1.2" fill="white"/>
          <circle cx="14" cy="10" r="1.2" fill="white"/>
        </svg>
        <span data-i18n="nav_social">Social</span>
      </div>
      <div class="nav-item" id="nav-leaderboard">
        üèÜ<br><span data-i18n="nav_leaderboard">Leaderboard</span>
      </div>
      <div class="nav-item" id="nav-profile">
        üë§<br><span data-i18n="nav_profile">Profile</span>
      </div>
    </div>

  </div>

  <!-- ================================ -->
  <!-- üë• PLAYER SELECTION SCREEN -->
  <!-- ================================ -->
  <div id="player-select" class="hidden">
    <h2>Choose Game Mode</h2>
    <div class="mode-buttons">
      <button id="single-player-btn">üéÆ Single Player</button>
      <button id="two-player-btn">üë• 2 Players</button>
      <button id="back-to-home-btn" class="back-btn">‚Üê Back</button>
    </div>
  </div>

  <!-- ================================ -->
  <!-- üéØ MODE SELECT SCREEN -->
  <!-- ================================ -->
  <div id="mode-select" class="hidden">
    <h2>Choose Game Mode</h2>
    <div class="mode-buttons">
      <button id="time-attack-btn">‚ö° Time Attack (60s)</button>
      <button id="casual-btn">üéØ Casual (5 questions)</button>
      <button id="three-hearts-btn">üíú 3 Hearts</button>
      <button id="back-btn" class="back-btn">‚Üê Back</button>
    </div>
  </div>

  <!-- ================================ -->
  <!-- üéØ DIFFICULTY SELECTION SCREEN -->
  <!-- ================================ -->
  <div id="area-difficulty-screen" class="hidden">
    <h2>Select Difficulty Level</h2>
    <div class="difficulty-buttons">
      <button id="area-easy-btn" class="difficulty-btn">
        <span class="difficulty-icon">üü¢</span>
        <span class="difficulty-name">Easy</span>
        <span class="difficulty-desc">10 Largest Countries</span>
      </button>
      <button id="area-medium-btn" class="difficulty-btn">
        <span class="difficulty-icon">üü°</span>
        <span class="difficulty-name">Medium</span>
        <span class="difficulty-desc">155 Mid-size Countries</span>
      </button>
      <button id="area-hard-btn" class="difficulty-btn">
        <span class="difficulty-icon">üî¥</span>
        <span class="difficulty-name">Hard</span>
        <span class="difficulty-desc">25 Smallest Countries</span>
      </button>
    </div>
    <button id="back-from-difficulty" class="back-btn">‚Üê Back</button>
  </div>

  <!-- ================================ -->
  <!-- üéÆ GAME SCREEN -->
  <!-- ================================ -->
  <div id="game-screen" class="hidden">
    <!-- Exit Button (Top Left) -->
    <button id="back-to-menu" class="exit-btn">‚Üê</button>
    
    <!-- Question Counter (Top Right) -->
    <div id="question-counter" class="question-counter" style="display:none;"></div>
    
    <header>
      <h2 id="question">Which country's flag is this?</h2>
      <div id="score">Score: 0</div>
      <div id="timer">‚è≥ 60s</div>
    </header>

    <main>
      <img id="flag" src="" alt="Flag">
      <div id="answers"></div>
      <div id="result"></div>
    </main>

    <footer>
      <button id="play-again" style="display:none;">üîÅ Play Again</button>
      <button id="main-menu" style="display:none;">üè† Main Menu</button>
    </footer>
  </div>

  <!-- Slot Selection Modal (outside all containers for z-index) -->
  <div class="slot-modal hidden" id="slot-modal">
    <div class="slot-modal-backdrop" onclick="closeSlotModal()"></div>
    <div class="slot-modal-content">
      <h3 class="slot-modal-title" data-i18n="topic_add_to_slot">Add to Slot</h3>
      <p class="slot-modal-subtitle">Choose a slot for this quiz</p>
      <div class="slot-modal-buttons">
        <button class="slot-modal-btn" onclick="playClickSound(); assignToSlot(1);">
          <span class="slot-modal-btn-num">1</span>
          <span class="slot-modal-btn-text" id="slot-modal-btn-1">Empty</span>
        </button>
        <button class="slot-modal-btn" onclick="playClickSound(); assignToSlot(2);">
          <span class="slot-modal-btn-num">2</span>
          <span class="slot-modal-btn-text" id="slot-modal-btn-2">Empty</span>
        </button>
      </div>
      <button class="slot-modal-cancel" onclick="playClickSound(); closeSlotModal();">Cancel</button>
    </div>
  </div>

  <!-- Toast Notification (outside all containers for z-index) -->
  <div class="toast-notification hidden" id="toast-notification">
    <span class="toast-message"></span>
  </div>

  <!-- Static Tutorial Profile Page (for step 12/19) - Uses SAME classes as real profile -->
  <div class="tutorial-static-profile hidden" id="tutorial-static-profile">
    <!-- Reuses exact same structure and classes as real profile-view -->
    <div class="profile-view" style="display: flex; flex-direction: column;">
      
      <!-- Profile Header Section -->
      <div class="profile-header">
        <!-- Background Banner with Animated Glow -->
        <div class="profile-banner"></div>
        
        <!-- Glowing Avatar -->
        <div class="profile-avatar">üë§</div>
        
        <!-- Identity Block -->
        <div class="profile-info">
          <h2 class="profile-name">Player</h2>
          <div class="profile-name-row">
            <div class="level-badge profile-level-badge">
              <div class="level-badge-ring">
                <svg viewBox="0 0 48 48">
                  <circle class="level-ring-bg" cx="24" cy="24" r="22"/>
                  <circle class="level-ring-progress" cx="24" cy="24" r="22" style="stroke-dashoffset: 100;"/>
                </svg>
              </div>
              <div class="level-badge-inner">
                <span class="level-badge-text">LV</span>
                <span class="level-badge-number">2</span>
              </div>
            </div>
          </div>
          <div class="profile-location">üåç Location not set</div>
          <div class="profile-divider"></div>
        </div>
        
        <!-- Three Feature Cards -->
        <div class="profile-feature-cards">
          <div class="feature-card achievements-card" id="tutorial-achievements-target">
            <span class="feature-card-icon">üèÜ</span>
            <div class="feature-card-title" data-i18n="profile_achievements">Achievements</div>
            <div class="feature-card-value">0</div>
          </div>
          <div class="feature-card streaks-card">
            <span class="feature-card-icon">üî•</span>
            <div class="feature-card-title" data-i18n="profile_streaks">Streaks</div>
            <div class="feature-card-value">0</div>
          </div>
          <div class="feature-card quanta-card">
            <span class="feature-card-icon">‚ú¶</span>
            <div class="feature-card-title" data-i18n="profile_quanta">Quanta</div>
            <div class="feature-card-value">0</div>
          </div>
        </div>
      </div>
      
      <!-- Quick Stats Floating Card -->
      <div class="profile-stats-row">
        <div class="stat-item">
          <div class="stat-label">GAMES</div>
          <div class="stat-value">10</div>
        </div>
        <div class="stat-item">
          <div class="stat-label" data-i18n="profile_time">TIME</div>
          <div class="stat-value">12h</div>
        </div>
        <div class="stat-item">
          <div class="stat-label" data-i18n="profile_followers">FOLLOWERS</div>
          <div class="stat-value">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label" data-i18n="profile_following">FOLLOWING</div>
          <div class="stat-value">0</div>
        </div>
      </div>
      
      <!-- Stats Chart Button for tutorial -->
      <div class="profile-stats-section">
        <button class="stats-chart-button" id="tutorial-stats-button">
          <span class="stats-chart-btn-icon">üìà</span>
          <span class="stats-chart-btn-text">View Stats Chart</span>
          <span class="stats-chart-btn-arrow">‚Üí</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Static Tutorial Achievements Page (for step 14/19) - EXACT COPY -->
  <div class="tutorial-static-achievements hidden" id="tutorial-static-achievements">
    <div class="achievements-ritual-view" style="display: flex !important;">
      <!-- Ambient Background -->
      <div class="ritual-ambient-bg">
        <div class="ritual-ambient-orb"></div>
        <div class="ritual-ambient-orb"></div>
        <div class="ritual-ambient-orb"></div>
      </div>

      <!-- Header with Back Button -->
      <div class="ritual-header">
        <button class="ritual-back-btn">‚Üê</button>
        <div class="ritual-title-container">
          <h1 class="ritual-title" data-i18n="achievements_ritual">Achievements</h1>
          <p class="ritual-subtitle" data-i18n="achievements_subtitle">The Seven Paths of Mastery</p>
        </div>
      </div>

      <!-- 8 Houses Grid -->
      <div class="ritual-houses-container" id="tutorial-houses-grid">
        <!-- House 1: Path of Progression -->
        <div class="ritual-house-card house-progression">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <span class="ritual-house-icon">üî∑</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_progression">Progression</span>
        </div>

        <!-- House 2: Path of Skill -->
        <div class="ritual-house-card house-skill">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape skill-hexagon">
            <span class="ritual-house-icon">‚¨°</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_skill">Skill</span>
        </div>

        <!-- House 3: Path of Exploration -->
        <div class="ritual-house-card house-exploration">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <span class="compass-cardinal-n">N</span>
            <span class="compass-cardinal-e">E</span>
            <span class="compass-cardinal-s">S</span>
            <span class="compass-cardinal-w">W</span>
            <span class="ritual-house-icon">üß≠</span>
          </div>
          <span class="ritual-house-name">Exploration</span>
        </div>

        <!-- House 4: Path of Time Attack -->
        <div class="ritual-house-card house-time">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <span class="ritual-house-icon">‚è±Ô∏è</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_time_attack">Time Attack</span>
        </div>

        <!-- House 5: Path of Survival -->
        <div class="ritual-house-card house-survival">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <div class="survival-crack-line"></div>
            <span class="ritual-house-icon">‚ù§Ô∏è‚Äçüî•</span>
          </div>
          <span class="ritual-house-name">Survival</span>
        </div>

        <!-- House 6: Path of Casual Mastery -->
        <div class="ritual-house-card house-casual">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <span class="ritual-house-icon">üåø</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_casual">Casual</span>
        </div>

        <!-- House 7: Path of Behaviour -->
        <div class="ritual-house-card house-behaviour">
          <div class="ritual-house-glow"></div>
          <div class="ritual-house-shape">
            <div class="behaviour-cosmic-particle"></div>
            <div class="behaviour-cosmic-particle"></div>
            <div class="behaviour-cosmic-particle"></div>
            <div class="behaviour-cosmic-particle"></div>
            <span class="ritual-house-icon">üîÆ</span>
          </div>
          <span class="ritual-house-name" data-i18n="achievement_behaviour">Behaviour</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Static Tutorial Stats Page (for steps 17-18/19) - EXACT COPY -->
  <div class="tutorial-static-stats hidden" id="tutorial-static-stats">
    <div class="stats-chart-dashboard" style="display: flex !important;">
      <!-- Top Bar -->
      <div class="stats-chart-top-bar">
        <button class="stats-chart-back-btn">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
        </button>
        <h1 class="stats-chart-title">Overall Stats</h1>
        <div class="stats-chart-spacer"></div>
      </div>

      <!-- Page Navigation Tabs -->
      <div class="stats-page-tabs">
        <button class="stats-page-tab active" id="tutorial-stats-tab-1">
          <span class="stats-page-tab-icon">üìä</span>
          <span class="stats-page-tab-text" data-i18n="stats_overall">Overall</span>
        </button>
        <button class="stats-page-tab" id="tutorial-stats-tab-2">
          <span class="stats-page-tab-icon">üéØ</span>
          <span class="stats-page-tab-text" data-i18n="stats_by_topic">By Topic</span>
        </button>
      </div>

      <!-- Page 1: Overall Stats Chart -->
      <div class="stats-page" id="tutorial-stats-page-1">
        <!-- Stat Type Selector -->
        <div class="stats-type-selector" id="tutorial-stats-selector">
          <button class="stats-type-btn active" data-stat="games">
            <span class="stats-type-icon">üéÆ</span>
            <span class="stats-type-label" data-i18n="stats_games_label">Games</span>
          </button>
          <button class="stats-type-btn" data-stat="questions">
            <span class="stats-type-icon">‚ùì</span>
            <span class="stats-type-label" data-i18n="stats_questions_label">Questions</span>
          </button>
          <button class="stats-type-btn" data-stat="correct">
            <span class="stats-type-icon">‚úÖ</span>
            <span class="stats-type-label">Correct</span>
          </button>
          <button class="stats-type-btn" data-stat="wrong">
            <span class="stats-type-icon">‚ùå</span>
            <span class="stats-type-label" data-i18n="stats_wrong_label">Wrong</span>
          </button>
          <button class="stats-type-btn" data-stat="time">
            <span class="stats-type-icon">‚è±Ô∏è</span>
            <span class="stats-type-label">Time</span>
          </button>
          <button class="stats-type-btn" data-stat="streak">
            <span class="stats-type-icon">üî•</span>
            <span class="stats-type-label" data-i18n="stats_streak_label">Streak</span>
          </button>
        </div>

        <!-- Time Period Tabs -->
        <div class="stats-period-tabs">
          <button class="stats-period-tab active" data-period="day" data-i18n="pxp_1_day">1 Day</button>
          <button class="stats-period-tab" data-period="week" data-i18n="pxp_1_week">1 Week</button>
          <button class="stats-period-tab" data-period="month" data-i18n="pxp_1_month">1 Month</button>
          <button class="stats-period-tab" data-period="year" data-i18n="pxp_1_year">1 Year</button>
          <button class="stats-period-tab" data-period="all" data-i18n="pxp_all_time">All Time</button>
        </div>

        <!-- Chart Container -->
        <div class="stats-chart-container">
          <div class="stats-chart-empty">
            <span class="stats-empty-icon">üì≠</span>
            <span class="stats-empty-text" data-i18n="stats_no_data">No data available for this time range</span>
          </div>
        </div>

        <!-- Summary Cards -->
        <div class="stats-summary-cards">
          <div class="stats-summary-card peak">
            <span class="stats-summary-label">Peak</span>
            <span class="stats-summary-value">0</span>
          </div>
          <div class="stats-summary-card average">
            <span class="stats-summary-label" data-i18n="stats_average">Average</span>
            <span class="stats-summary-value">0</span>
          </div>
          <div class="stats-summary-card total">
            <span class="stats-summary-label" data-i18n="stats_total">Total</span>
            <span class="stats-summary-value">0</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Guided Tutorial Overlay System -->
  <div class="tutorial-overlay hidden" id="tutorial-overlay">
    <!-- Dark backdrop with spotlight cutout (controlled via JS) -->
    <div class="tutorial-spotlight-mask" id="tutorial-spotlight-mask"></div>
    
    <!-- Highlight ring around element -->
    <div class="tutorial-highlight-ring hidden" id="tutorial-highlight-ring"></div>
    
    <!-- Tap indicator -->
    <div class="tutorial-tap-indicator hidden" id="tutorial-tap-indicator">
      <span class="tap-hand">üëÜ</span>
      <span class="tap-text">Tap here</span>
    </div>
    
    <!-- Tutorial text box with arrow -->
    <div class="tutorial-textbox" id="tutorial-textbox">
      <div class="tutorial-textbox-arrow" id="tutorial-textbox-arrow"></div>
      <div class="tutorial-textbox-content">
        <div class="tutorial-step-indicator" id="tutorial-step-indicator">1 / 15</div>
        <h3 class="tutorial-textbox-title" id="tutorial-textbox-title">Welcome!</h3>
        <p class="tutorial-textbox-text" id="tutorial-textbox-text">Welcome to Quizzena tutorial.</p>
      </div>
      <div class="tutorial-textbox-buttons">
        <button class="tutorial-skip-btn" id="tutorial-skip-btn">Skip</button>
        <button class="tutorial-next-btn" id="tutorial-next-btn">Next</button>
      </div>
    </div>
  </div>

  <script src="script.js?v=18"></script>
</body>
</html>
